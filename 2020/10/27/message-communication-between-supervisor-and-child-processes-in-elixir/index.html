
 <!DOCTYPE HTML>
<html >
<head>
  <script data-ad-client="ca-pub-3734008573442765" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <meta charset="UTF-8">
  
    <title>Message communication between supervisor and child processes in Elixir | Thinking in Crowd / 鹄思乱想</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="鹄思乱想">
    
    <meta name="description" content="Process is one of the core concept in Elixir&amp;#x2F;Erlang.  Sending &amp;amp; receiving messages between them is crucial.  So how should the communication ">
    
    
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="kenspirit" />
    <meta name="twitter:title" content="Message communication between supervisor and child processes in Elixir | Thinking in Crowd / 鹄思乱想" />
      
    
    
    <link rel="alternate" href="/atom.xml" title="Thinking in Crowd / 鹄思乱想" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/qmark.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/qmark.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.2.0"></head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Thinking in Crowd / 鹄思乱想" title="Thinking in Crowd / 鹄思乱想"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Thinking in Crowd / 鹄思乱想">Thinking in Crowd / 鹄思乱想</a></h1>
				<h2 class="blog-motto">Swan flying in the immense sky</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">Home</a></li>
					
						<li><a href="/about">About</a></li>
					
						<li><a href="/algorithm">Algorithm</a></li>
					
						<li><a href="/kanban">Kanban</a></li>
					
						<li><a href="/nodeppt">Slideshare</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:www.thinkingincrowd.me">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/10/27/message-communication-between-supervisor-and-child-processes-in-elixir/" title="Message communication between supervisor and child processes in Elixir" itemprop="url">Message communication between supervisor and child processes in Elixir</a>
  </h1>
  <p class="article-author">By
    
      <a href="https://plus.google.com/108764880042816550000?rel=author" title="鹄思乱想" target="_blank" itemprop="author">鹄思乱想</a>
    </p>
  <p class="article-time">
    <time datetime="2020-10-27T12:40:00.000Z" itemprop="datePublished">Oct 27 2020</time>
    Updated:<time datetime="2022-08-28T08:07:15.453Z" itemprop="dateModified">Aug 28 2022</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Messages-for-itself"><span class="toc-number">1.</span> <span class="toc-text">Messages for itself</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Normal-Messages-between-Parent-and-Child"><span class="toc-number">2.</span> <span class="toc-text">Normal Messages between Parent and Child</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Message-for-Parent-Supervisor-Termination"><span class="toc-number">3.</span> <span class="toc-text">Message for Parent Supervisor Termination</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Why-the-case"><span class="toc-number">3.1.</span> <span class="toc-text">Why the case</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Which-direction"><span class="toc-number">3.2.</span> <span class="toc-text">Which direction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Process-exit"><span class="toc-number">3.3.</span> <span class="toc-text">Process.exit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Impact-of-Restart-Strategy"><span class="toc-number">3.4.</span> <span class="toc-text">Impact of Restart Strategy</span></a></li></ol></li></ol>
		</div>
		
		<p>Process is one of the core concept in Elixir&#x2F;Erlang.  Sending &amp; receiving messages between them is crucial.  So how should the communication be done in the spider project I introduced in <a href="http://www.thinkingincrowd.me/2020/09/06/multi-level-supervision-in-elixir/">last blog</a>?</p>
<p>Let us take a look on different types of scenarios below.</p>
<h2 id="Messages-for-itself"><a href="#Messages-for-itself" class="headerlink" title="Messages for itself"></a>Messages for itself</h2><p>The <code>Spider.Fetcher</code> only has one job.  It asks one URL from <code>Spider.Manager</code>, crawls the page content and sends back the result.</p>
<p>This job should be invoked regularly based on a configured interval after initialization and crawling for one URL.  Hence, the <code>Spider.Fetcher</code> should send message to itself at this two points as you can see below.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span></span>(state = &#123;spider_config, index, manager_pid&#125;) <span class="keyword">do</span></span><br><span class="line">  next_move(spider_config)</span><br><span class="line"></span><br><span class="line">  &#123;<span class="symbol">:ok</span>, state&#125;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_info</span></span>(<span class="symbol">:crawl</span>, state = &#123;spider_config, _index, manager_pid&#125;) <span class="keyword">do</span></span><br><span class="line">  url = <span class="title class_">GenServer</span>.call(manager_pid, <span class="symbol">:next_url</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> url != <span class="literal">nil</span> <span class="keyword">do</span></span><br><span class="line">    result = crawl(spider_config, url)</span><br><span class="line">    <span class="title class_">GenServer</span>.cast(manager_pid, &#123;<span class="symbol">:result</span>, url, result&#125;)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  next_move(spider_config)</span><br><span class="line"></span><br><span class="line">  &#123;<span class="symbol">:noreply</span>, state&#125;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">defp</span> <span class="title">next_move</span></span>(spider_config) <span class="keyword">do</span></span><br><span class="line">  <span class="title class_">Process</span>.send_after(self(), <span class="symbol">:crawl</span>, spider_config.crawl_interval)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="Normal-Messages-between-Parent-and-Child"><a href="#Normal-Messages-between-Parent-and-Child" class="headerlink" title="Normal Messages between Parent and Child"></a>Normal Messages between Parent and Child</h2><p>As we can see in the code above, <code>Spider.Fetcher</code> sends two different types of message to its <code>Spider.Manager</code> process.  </p>
<ul>
<li><code>:next_url</code> for asking next url to crawl.  </li>
<li><code>:result</code> for sending back the crawled result.</li>
</ul>
<p>The <code>manager_pid</code> is captured in its state because leaking the process naming logic here and use Name Registration to look it up again are unnecessary.</p>
<p>For the same reason, the process ids of the child processes are captured during creation.  Messages can be sent through them if I need to collect child processes’ status or start&#x2F;stop them.</p>
<p>For example, in <code>SpiderEngine.Manager</code>, the <code>all_engines</code> is a map that uses spider name as key, spider process id as value.  </p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_info</span></span>(<span class="symbol">:kickoff</span>, _) <span class="keyword">do</span></span><br><span class="line">  all_spiders = <span class="title class_">SpiderStorage</span>.get_all_spiders()</span><br><span class="line"></span><br><span class="line">  engines =</span><br><span class="line">    all_spiders</span><br><span class="line">    |&gt; <span class="title class_">Enum</span>.into(%&#123;&#125;, <span class="keyword">fn</span> spider_config -&gt;</span><br><span class="line">        start_spider(spider_config, %&#123;&#125;)</span><br><span class="line">      <span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line">  &#123;<span class="symbol">:noreply</span>, %&#123;<span class="symbol">all_engines:</span> engines&#125;&#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="Message-for-Parent-Supervisor-Termination"><a href="#Message-for-Parent-Supervisor-Termination" class="headerlink" title="Message for Parent Supervisor Termination"></a>Message for Parent Supervisor Termination</h2><h3 id="Why-the-case"><a href="#Why-the-case" class="headerlink" title="Why the case"></a>Why the case</h3><p>It might be counter-intuitive to ask the child process to terminate the whole supervisor, but it’s reasonable if you put it under a real scenario.</p>
<p>During spider initialization, if it encounters unrecoverable issues, say unreachable target website or receiving 401 status code because it’s blocked, you might prefer to take down the spider instead of keep trying.</p>
<h3 id="Which-direction"><a href="#Which-direction" class="headerlink" title="Which direction"></a>Which direction</h3><p>In my case, the <code>Spider.Manager.Facebook</code> makes the decision on bringing down the whole supervision tree below <code>Spider.Facebook</code>.  But how?  Should it directly sends signal to <code>Spider.Facebook</code> and ask it to exit?  Or go through the higher ladder by asking the <code>SpiderEngine.Manager</code> to terminate it?</p>
<p><strong>TLDR</strong>.  Never call <code>Process.exit</code> with parent process id in child process.  Use <code>Supervisor.stop/3</code> or <code>DynamicSupervisor.terminate_child/2</code> instead.</p>
<h3 id="Process-exit"><a href="#Process-exit" class="headerlink" title="Process.exit"></a>Process.exit</h3><p>I roughly remember there is one API called <code>Process.exit/2</code>, and so wrote some modules to test.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">defmodule</span> <span class="title">Test.Root</span></span> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">use</span> <span class="title class_">Supervisor</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">start_link</span></span>(_) <span class="keyword">do</span></span><br><span class="line">    <span class="title class_">Supervisor</span>.start_link(__MODULE__, <span class="symbol">:no_args</span>, <span class="symbol">name:</span> __MODULE__)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">init</span></span>(<span class="symbol">:no_args</span>) <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># Code of Test.Manager is not attached.</span></span><br><span class="line">    <span class="comment"># Added it here just to ensure Test.Root has more than one child. </span></span><br><span class="line">    children = [</span><br><span class="line">      <span class="title class_">Test</span>.<span class="title class_">Manager</span>,</span><br><span class="line">      <span class="title class_">Test</span>.<span class="title class_">Supervisor</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># So that when Test.Supervisor terminates, it does not affect Test.Root or others</span></span><br><span class="line">    opts = [<span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span>]</span><br><span class="line">    <span class="title class_">Supervisor</span>.init(children, opts)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">defmodule</span> <span class="title">Test.Supervisor</span></span> <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># When it&#x27;s terminated normally, it will not be restarted again</span></span><br><span class="line">  <span class="keyword">use</span> <span class="title class_">DynamicSupervisor</span>, <span class="symbol">restart:</span> <span class="symbol">:transient</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">start_link</span></span>(_) <span class="keyword">do</span></span><br><span class="line">    <span class="title class_">DynamicSupervisor</span>.start_link(__MODULE__, <span class="symbol">:no_args</span>, <span class="symbol">name:</span> __MODULE__)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">init</span></span>(<span class="symbol">:no_args</span>) <span class="keyword">do</span></span><br><span class="line">    <span class="title class_">DynamicSupervisor</span>.init(<span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">start_worker</span></span>(id) <span class="keyword">do</span></span><br><span class="line">    spec = %&#123;</span><br><span class="line">      <span class="symbol">id:</span> id,</span><br><span class="line">      <span class="symbol">start:</span> &#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, [id]&#125;,</span><br><span class="line">      <span class="symbol">restart:</span> <span class="symbol">:transient</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">DynamicSupervisor</span>.start_child(<span class="title class_">Test</span>.<span class="title class_">Supervisor</span>, spec)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">defmodule</span> <span class="title">Test.Worker</span></span> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">use</span> <span class="title class_">GenServer</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">down</span></span>(self_pid, sup_pid) <span class="keyword">do</span></span><br><span class="line">    <span class="title class_">GenServer</span>.call(self_pid, &#123;<span class="symbol">:down</span>, sup_pid&#125;)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">start_link</span></span>(id) <span class="keyword">do</span></span><br><span class="line">    <span class="title class_">GenServer</span>.start_link(__MODULE__, <span class="symbol">:no_args</span>, <span class="symbol">name:</span> <span class="symbol">:<span class="string">&quot;<span class="subst">#&#123;__MODULE__&#125;</span>_<span class="subst">#&#123;id&#125;</span>&quot;</span></span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">init</span></span>(<span class="symbol">:no_args</span>) <span class="keyword">do</span></span><br><span class="line">    &#123;<span class="symbol">:ok</span>, %&#123; &#125;&#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">handle_call</span></span>(&#123;<span class="symbol">:down</span>, sup_pid&#125;, _from, state) <span class="keyword">do</span></span><br><span class="line">    &#123;<span class="symbol">:reply</span>, <span class="title class_">Process</span>.exit(sup_pid, <span class="symbol">:normal</span>), state&#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>Here is the testing code and result.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">iex(<span class="number">1</span>)&gt; [root, mgr, sup] = [<span class="title class_">Test</span>.<span class="title class_">Root</span>, <span class="title class_">Test</span>.<span class="title class_">Manager</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>] |&gt; <span class="title class_">Enum</span>.map(&amp;<span class="title class_">Process</span>.whereis/<span class="number">1</span>)</span><br><span class="line">[<span class="comment">#PID&lt;0.394.0&gt;, #PID&lt;0.395.0&gt;, #PID&lt;0.396.0&gt;]</span></span><br><span class="line">iex(<span class="number">2</span>)&gt; &#123;<span class="symbol">:ok</span>, child_a&#125; = <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>.start_worker(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">&#123;<span class="symbol">:ok</span>, <span class="comment">#PID&lt;0.407.0&gt;&#125;</span></span><br><span class="line">iex(<span class="number">3</span>)&gt; &#123;<span class="symbol">:ok</span>, child_b&#125; = <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>.start_worker(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">&#123;<span class="symbol">:ok</span>, <span class="comment">#PID&lt;0.405.0&gt;&#125;</span></span><br><span class="line">iex(<span class="number">4</span>)&gt; <span class="title class_">Test</span>.<span class="title class_">Worker</span>.down(child_a, sup)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">iex(<span class="number">5</span>)&gt; [root, mgr, sup, child_a, child_b] |&gt; <span class="title class_">Enum</span>.map(&amp;<span class="title class_">Process</span>.alive?/<span class="number">1</span>)</span><br><span class="line">[<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>]</span><br><span class="line">iex(<span class="number">6</span>)&gt; <span class="title class_">Supervisor</span>.which_children(root)</span><br><span class="line">[</span><br><span class="line">  &#123;<span class="title class_">Test</span>.<span class="title class_">Supervisor</span>, <span class="comment">#PID&lt;0.396.0&gt;, :supervisor, [Test.Supervisor]&#125;,</span></span><br><span class="line">  &#123;<span class="title class_">Test</span>.<span class="title class_">Manager</span>, <span class="comment">#PID&lt;0.395.0&gt;, :worker, [Test.Manager]&#125;</span></span><br><span class="line">]</span><br><span class="line">iex(<span class="number">7</span>)&gt; <span class="title class_">Supervisor</span>.which_children(sup)</span><br><span class="line">[&#123;<span class="symbol">:undefined</span>, <span class="comment">#PID&lt;0.405.0&gt;, :worker, [Test.Worker]&#125;]</span></span><br></pre></td></tr></table></figure>

<p>In step 5, it shows that all the processes created are alived.  But shouldn’t the <code>Test.Supervisor</code> and two of its child processes be terminated?  When checking on the children of <code>root</code> and <code>sup</code> processes in step 6 &amp; 7:</p>
<ol>
<li>Process for <code>sup</code> and <code>child_a</code> are still alive.</li>
<li>Process <code>child_a</code> is not under supervision of <code>Test.Supervisor</code>.</li>
</ol>
<p>After going through the documentation for API <code>Process.exit/2</code> more carefully and learning what <strong>trapping exits</strong> means, I finally the reasons behind.</p>
<ol>
<li>Supervisor traps exits.  Exit signal is transformed to <code>&#123;:EXIT, from, :normal&#125;</code> message.</li>
<li><code>Process.exit(supp, :normal)</code> from <code>child_a</code> makes <code>Test.Supervisor</code> think that <code>child_a</code> is terminated.</li>
<li><code>Test.Supervisor</code> removes <code>child_a</code> from its supervision tree even though the <code>child_a</code> process is actually alive.</li>
</ol>
<p>According to the API doc, using <code>:kill</code> as exit reason can unconditionally kill the process.  Does it work in this case?</p>
<p>If I changed the handling for <code>:down</code> message in <code>Test.Worker</code> as below:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_call</span></span>(&#123;<span class="symbol">:down</span>, sup_pid&#125;, _from, state) <span class="keyword">do</span></span><br><span class="line">  &#123;<span class="symbol">:reply</span>, <span class="title class_">Process</span>.exit(sup_pid, <span class="symbol">:kill</span>), state&#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>The test result will be:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">iex(<span class="number">1</span>)&gt; [root, mgr, sup] = [<span class="title class_">Test</span>.<span class="title class_">Root</span>, <span class="title class_">Test</span>.<span class="title class_">Manager</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>] |&gt; <span class="title class_">Enum</span>.map(&amp;<span class="title class_">Process</span>.whereis/<span class="number">1</span>)</span><br><span class="line">[<span class="comment">#PID&lt;0.400.0&gt;, #PID&lt;0.401.0&gt;, #PID&lt;0.402.0&gt;]</span></span><br><span class="line">iex(<span class="number">2</span>)&gt; &#123;<span class="symbol">:ok</span>, child_a&#125; = <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>.start_worker(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">&#123;<span class="symbol">:ok</span>, <span class="comment">#PID&lt;0.419.0&gt;&#125;</span></span><br><span class="line">iex(<span class="number">3</span>)&gt; &#123;<span class="symbol">:ok</span>, child_b&#125; = <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>.start_worker(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">&#123;<span class="symbol">:ok</span>, <span class="comment">#PID&lt;0.421.0&gt;&#125;</span></span><br><span class="line">iex(<span class="number">4</span>)&gt; <span class="title class_">Test</span>.<span class="title class_">Worker</span>.down(child_a, sup)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">iex(<span class="number">5</span>)&gt; [root, mgr, sup, child_a, child_b] |&gt; <span class="title class_">Enum</span>.map(&amp;<span class="title class_">Process</span>.alive?/<span class="number">1</span>)</span><br><span class="line">[<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>]</span><br><span class="line">iex(<span class="number">7</span>)&gt; <span class="title class_">Supervisor</span>.which_children(root)</span><br><span class="line">[</span><br><span class="line">  &#123;<span class="title class_">Test</span>.<span class="title class_">Supervisor</span>, <span class="comment">#PID&lt;0.423.0&gt;, :supervisor, [Test.Supervisor]&#125;,</span></span><br><span class="line">  &#123;<span class="title class_">Test</span>.<span class="title class_">Manager</span>, <span class="comment">#PID&lt;0.401.0&gt;, :worker, [Test.Manager]&#125;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>In step 5, the supervision tree of <code>sup</code> is terminated.  However, when I checked the children of <code>root</code>, there is a new process created for <code>Test.Supervisor</code> because it is restarted as it does not exit normally.</p>
<h3 id="Impact-of-Restart-Strategy"><a href="#Impact-of-Restart-Strategy" class="headerlink" title="Impact of Restart Strategy"></a>Impact of Restart Strategy</h3><p>Worth noting that, if we keep using <code>Process.exit(sup_pid, :normal)</code> in <code>Test.Worker</code> but change the child spec of <code>Test.Worker</code> in <code>Test.Supervisor</code> by omitting the <code>restart</code> strategy which is <code>:permanent</code> by default, the test result might be misleading.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_worker</span></span>(id) <span class="keyword">do</span></span><br><span class="line">  spec = %&#123;</span><br><span class="line">    <span class="symbol">id:</span> id,</span><br><span class="line">    <span class="comment"># restart: :transient, # Omitting this</span></span><br><span class="line">    <span class="symbol">start:</span> &#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, [id]&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">DynamicSupervisor</span>.start_child(<span class="title class_">Test</span>.<span class="title class_">Supervisor</span>, spec)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>Test result:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">iex(<span class="number">1</span>)&gt; [root, mgr, sup] = [<span class="title class_">Test</span>.<span class="title class_">Root</span>, <span class="title class_">Test</span>.<span class="title class_">Manager</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>] |&gt; <span class="title class_">Enum</span>.map(&amp;<span class="title class_">Process</span>.whereis/<span class="number">1</span>)</span><br><span class="line">[<span class="comment">#PID&lt;0.400.0&gt;, #PID&lt;0.401.0&gt;, #PID&lt;0.402.0&gt;]</span></span><br><span class="line">iex(<span class="number">2</span>)&gt; &#123;<span class="symbol">:ok</span>, child_a&#125; = <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>.start_worker(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">&#123;<span class="symbol">:ok</span>, <span class="comment">#PID&lt;0.411.0&gt;&#125;</span></span><br><span class="line">iex(<span class="number">3</span>)&gt; &#123;<span class="symbol">:ok</span>, child_b&#125; = <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>.start_worker(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">&#123;<span class="symbol">:ok</span>, <span class="comment">#PID&lt;0.413.0&gt;&#125;</span></span><br><span class="line">iex(<span class="number">4</span>)&gt; <span class="title class_">Test</span>.<span class="title class_">Worker</span>.down(child_a, sup)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">iex(<span class="number">5</span>)&gt;[root, mgr, sup, child_a, child_b] |&gt; <span class="title class_">Enum</span>.map(&amp;<span class="title class_">Process</span>.alive?/<span class="number">1</span>)</span><br><span class="line">[<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>]</span><br><span class="line">iex(<span class="number">6</span>)&gt; <span class="title class_">Supervisor</span>.which_children(root)</span><br><span class="line">[</span><br><span class="line">  &#123;<span class="title class_">Test</span>.<span class="title class_">Supervisor</span>, <span class="symbol">:undefined</span>, <span class="symbol">:supervisor</span>, [<span class="title class_">Test</span>.<span class="title class_">Supervisor</span>]&#125;,</span><br><span class="line">  &#123;<span class="title class_">Test</span>.<span class="title class_">Manager</span>, <span class="comment">#PID&lt;0.401.0&gt;, :worker, [Test.Manager]&#125;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>It looks like the supervisor process <code>sup</code> is terminated correctly.  However, if you start up your application with <code>sasl</code> logging on: <code>iex --logger-sasl-reports true -S mix</code>, you can see similar information after step 4:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">01</span><span class="symbol">:</span><span class="number">10.976</span> [error] <span class="title class_">Child</span> <span class="symbol">:undefined</span> of <span class="title class_">Supervisor</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span> terminated</span><br><span class="line">** (exit) normal</span><br><span class="line"><span class="symbol">Pid:</span> <span class="comment">#PID&lt;0.411.0&gt;</span></span><br><span class="line"><span class="title class_">Start</span> <span class="symbol">Call:</span> <span class="title class_">Test</span>.<span class="title class_">Worker</span>.start_link(<span class="string">&quot;A&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">01</span><span class="symbol">:</span><span class="number">10.976</span> [error] <span class="title class_">Child</span> <span class="symbol">:undefined</span> of <span class="title class_">Supervisor</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span> failed to start</span><br><span class="line">** (exit) already <span class="symbol">started:</span> <span class="comment">#PID&lt;0.411.0&gt;</span></span><br><span class="line"><span class="title class_">Start</span> <span class="symbol">Call:</span> <span class="title class_">Test</span>.<span class="title class_">Worker</span>.start_link(<span class="string">&quot;A&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">01</span><span class="symbol">:</span><span class="number">10.976</span> [error] <span class="title class_">Child</span> <span class="symbol">:undefined</span> of <span class="title class_">Supervisor</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span> failed to start</span><br><span class="line">** (exit) already <span class="symbol">started:</span> <span class="comment">#PID&lt;0.411.0&gt;</span></span><br><span class="line"><span class="title class_">Start</span> <span class="symbol">Call:</span> <span class="title class_">Test</span>.<span class="title class_">Worker</span>.start_link(<span class="string">&quot;A&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">01</span><span class="symbol">:</span><span class="number">10.976</span> [error] <span class="title class_">Child</span> <span class="symbol">:undefined</span> of <span class="title class_">Supervisor</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span> failed to start</span><br><span class="line">** (exit) already <span class="symbol">started:</span> <span class="comment">#PID&lt;0.411.0&gt;</span></span><br><span class="line"><span class="title class_">Start</span> <span class="symbol">Call:</span> <span class="title class_">Test</span>.<span class="title class_">Worker</span>.start_link(<span class="string">&quot;A&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">01</span><span class="symbol">:</span><span class="number">10.977</span> [error] <span class="title class_">Child</span> <span class="symbol">:undefined</span> of <span class="title class_">Supervisor</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span> caused shutdown</span><br><span class="line">** (exit) <span class="symbol">:reached_max_restart_intensity</span></span><br><span class="line"><span class="title class_">Start</span> <span class="symbol">Call:</span> <span class="title class_">Test</span>.<span class="title class_">Worker</span>.start_link(<span class="string">&quot;A&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>The <code>Test.Supervisor</code> actually tries to restart the <code>child_a</code> which indicates its termination by <code>Process.exit(sup_pid, :normal)</code>, but it keeps failing.  In the end, <code>Test.Supervisor</code> shutdown itself due to <code>:reached_max_restart_intensity</code>.  It seems the final outcome is what you need, but it is not working the same way as you thought.</p>
<p>By using <a target="_blank" rel="noopener" href="https://github.com/redink/extrace">ExTrace</a> with below command before executing the testing code, it shows what really happens behind the scene.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><span class="line">iex(<span class="number">1</span>)&gt; <span class="title class_">Extrace</span>.calls([</span><br><span class="line">...(<span class="number">1</span>)&gt;   &#123;<span class="title class_">DynamicSupervisor</span>, <span class="symbol">:handle_info</span>, <span class="keyword">fn</span> _ -&gt; <span class="symbol">:return</span> <span class="keyword">end</span>&#125;,</span><br><span class="line">...(<span class="number">1</span>)&gt;   &#123;<span class="title class_">DynamicSupervisor</span>, <span class="symbol">:maybe_restart_child</span>, <span class="keyword">fn</span> _ -&gt; <span class="symbol">:return</span> <span class="keyword">end</span>&#125;,</span><br><span class="line">...(<span class="number">1</span>)&gt;   &#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, <span class="keyword">fn</span> _ -&gt; <span class="symbol">:return</span> <span class="keyword">end</span>&#125;</span><br><span class="line">...(<span class="number">1</span>)&gt;   ], <span class="number">100</span>, <span class="symbol">scope:</span> <span class="symbol">:local</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line">iex(<span class="number">2</span>)&gt; [root, mgr, sup] = [<span class="title class_">Test</span>.<span class="title class_">Root</span>, <span class="title class_">Test</span>.<span class="title class_">Manager</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>] |&gt; <span class="title class_">Enum</span>.map(&amp;<span class="title class_">Process</span>.whereis/<span class="number">1</span>)</span><br><span class="line">[<span class="comment">#PID&lt;0.382.0&gt;, #PID&lt;0.383.0&gt;, #PID&lt;0.384.0&gt;]</span></span><br><span class="line">iex(<span class="number">3</span>)&gt; &#123;<span class="symbol">:ok</span>, child_a&#125; = <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>.start_worker(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">&#123;<span class="symbol">:ok</span>, <span class="comment">#PID&lt;0.400.0&gt;&#125;</span></span><br><span class="line">iex(<span class="number">4</span>)&gt; &#123;<span class="symbol">:ok</span>, child_b&#125; = <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>.start_worker(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">&#123;<span class="symbol">:ok</span>, <span class="comment">#PID&lt;0.402.0&gt;&#125;</span></span><br><span class="line">iex(<span class="number">5</span>)&gt; <span class="title class_">Test</span>.<span class="title class_">Worker</span>.down(child_a, sup)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.840371</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.handle_info(&#123;<span class="symbol">:EXIT</span>, <span class="comment">#PID&lt;0.400.0&gt;, :normal&#125;, %DynamicSupervisor&#123;</span></span><br><span class="line">  <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">  <span class="symbol">children:</span> %&#123;</span><br><span class="line">    <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;A&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">     <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;,</span><br><span class="line">    <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">     <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">  <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">  <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">  <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">  <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">  <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">  <span class="symbol">restarts:</span> [],</span><br><span class="line">  <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.851545</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.maybe_restart_child(<span class="comment">#PID&lt;0.400.0&gt;, :normal, %DynamicSupervisor&#123;</span></span><br><span class="line">  <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">  <span class="symbol">children:</span> %&#123;</span><br><span class="line">    <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;A&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">     <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;,</span><br><span class="line">    <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">     <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">  <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">  <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">  <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">  <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">  <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">  <span class="symbol">restarts:</span> [],</span><br><span class="line">  <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.852137</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.maybe_restart_child(<span class="symbol">:permanent</span>, <span class="symbol">:normal</span>, <span class="comment">#PID&lt;0.400.0&gt;, &#123;&#123;Test.Worker, :start_link, [&quot;A&quot;]&#125;, :permanent, 5000, :worker, [Test.Worker]&#125;, %DynamicSupervisor&#123;</span></span><br><span class="line">  <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">  <span class="symbol">children:</span> %&#123;</span><br><span class="line">    <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;A&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">     <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;,</span><br><span class="line">    <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">     <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">  <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">  <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">  <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">  <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">  <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">  <span class="symbol">restarts:</span> [],</span><br><span class="line">  <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.853046</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.maybe_restart_child/<span class="number">5</span> --&gt; &#123;<span class="symbol">:ok</span>,</span><br><span class="line"> %<span class="title class_">DynamicSupervisor</span>&#123;</span><br><span class="line">   <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">   <span class="symbol">children:</span> %&#123;</span><br><span class="line">     <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;:restarting,</span></span><br><span class="line">      &#123;&#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, [<span class="string">&quot;A&quot;</span>]&#125;, <span class="symbol">:permanent</span>, <span class="number">5000</span>, <span class="symbol">:worker</span>,</span><br><span class="line">       [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;&#125;,</span><br><span class="line">     <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">      <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">   <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">   <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">   <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">   <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">   <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">   <span class="symbol">restarts:</span> [<span class="number">-576460714</span>],</span><br><span class="line">   <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line"> &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.853617</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.maybe_restart_child/<span class="number">3</span> --&gt; &#123;<span class="symbol">:ok</span>,</span><br><span class="line"> %<span class="title class_">DynamicSupervisor</span>&#123;</span><br><span class="line">   <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">   <span class="symbol">children:</span> %&#123;</span><br><span class="line">     <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;:restarting,</span></span><br><span class="line">      &#123;&#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, [<span class="string">&quot;A&quot;</span>]&#125;, <span class="symbol">:permanent</span>, <span class="number">5000</span>, <span class="symbol">:worker</span>,</span><br><span class="line">       [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;&#125;,</span><br><span class="line">     <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">      <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">   <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">   <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">   <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">   <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">   <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">   <span class="symbol">restarts:</span> [<span class="number">-576460714</span>],</span><br><span class="line">   <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line"> &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.854183</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.handle_info/<span class="number">2</span> --&gt; &#123;<span class="symbol">:noreply</span>,</span><br><span class="line"> %<span class="title class_">DynamicSupervisor</span>&#123;</span><br><span class="line">   <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">   <span class="symbol">children:</span> %&#123;</span><br><span class="line">     <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;:restarting,</span></span><br><span class="line">      &#123;&#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, [<span class="string">&quot;A&quot;</span>]&#125;, <span class="symbol">:permanent</span>, <span class="number">5000</span>, <span class="symbol">:worker</span>,</span><br><span class="line">       [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;&#125;,</span><br><span class="line">     <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">      <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">   <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">   <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">   <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">   <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">   <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">   <span class="symbol">restarts:</span> [<span class="number">-576460714</span>],</span><br><span class="line">   <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line"> &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.854728</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.handle_info(&#123;<span class="symbol">:<span class="string">&quot;$gen_restart&quot;</span></span>, <span class="comment">#PID&lt;0.400.0&gt;&#125;, %DynamicSupervisor&#123;</span></span><br><span class="line">  <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">  <span class="symbol">children:</span> %&#123;</span><br><span class="line">    <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;:restarting,</span></span><br><span class="line">     &#123;&#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, [<span class="string">&quot;A&quot;</span>]&#125;, <span class="symbol">:permanent</span>, <span class="number">5000</span>, <span class="symbol">:worker</span>,</span><br><span class="line">      [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;&#125;,</span><br><span class="line">    <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">     <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">  <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">  <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">  <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">  <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">  <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">  <span class="symbol">restarts:</span> [<span class="number">-576460714</span>],</span><br><span class="line">  <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.855276</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.handle_info/<span class="number">2</span> --&gt; &#123;<span class="symbol">:noreply</span>,</span><br><span class="line"> %<span class="title class_">DynamicSupervisor</span>&#123;</span><br><span class="line">   <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">   <span class="symbol">children:</span> %&#123;</span><br><span class="line">     <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;:restarting,</span></span><br><span class="line">      &#123;&#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, [<span class="string">&quot;A&quot;</span>]&#125;, <span class="symbol">:permanent</span>, <span class="number">5000</span>, <span class="symbol">:worker</span>,</span><br><span class="line">       [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;&#125;,</span><br><span class="line">     <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">      <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">   <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">   <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">   <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">   <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">   <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">   <span class="symbol">restarts:</span> [<span class="number">-576460714</span>, <span class="number">-576460714</span>],</span><br><span class="line">   <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line"> &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.855847</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.handle_info(&#123;<span class="symbol">:<span class="string">&quot;$gen_restart&quot;</span></span>, <span class="comment">#PID&lt;0.400.0&gt;&#125;, %DynamicSupervisor&#123;</span></span><br><span class="line">  <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">  <span class="symbol">children:</span> %&#123;</span><br><span class="line">    <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;:restarting,</span></span><br><span class="line">     &#123;&#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, [<span class="string">&quot;A&quot;</span>]&#125;, <span class="symbol">:permanent</span>, <span class="number">5000</span>, <span class="symbol">:worker</span>,</span><br><span class="line">      [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;&#125;,</span><br><span class="line">    <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">     <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">  <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">  <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">  <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">  <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">  <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">  <span class="symbol">restarts:</span> [<span class="number">-576460714</span>, <span class="number">-576460714</span>],</span><br><span class="line">  <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.856410</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.handle_info/<span class="number">2</span> --&gt; &#123;<span class="symbol">:noreply</span>,</span><br><span class="line"> %<span class="title class_">DynamicSupervisor</span>&#123;</span><br><span class="line">   <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">   <span class="symbol">children:</span> %&#123;</span><br><span class="line">     <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;:restarting,</span></span><br><span class="line">      &#123;&#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, [<span class="string">&quot;A&quot;</span>]&#125;, <span class="symbol">:permanent</span>, <span class="number">5000</span>, <span class="symbol">:worker</span>,</span><br><span class="line">       [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;&#125;,</span><br><span class="line">     <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">      <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">   <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">   <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">   <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">   <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">   <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">   <span class="symbol">restarts:</span> [<span class="number">-576460714</span>, <span class="number">-576460714</span>, <span class="number">-576460714</span>],</span><br><span class="line">   <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line"> &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.857078</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.handle_info(&#123;<span class="symbol">:<span class="string">&quot;$gen_restart&quot;</span></span>, <span class="comment">#PID&lt;0.400.0&gt;&#125;, %DynamicSupervisor&#123;</span></span><br><span class="line">  <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">  <span class="symbol">children:</span> %&#123;</span><br><span class="line">    <span class="comment">#PID&lt;0.400.0&gt; =&gt; &#123;:restarting,</span></span><br><span class="line">     &#123;&#123;<span class="title class_">Test</span>.<span class="title class_">Worker</span>, <span class="symbol">:start_link</span>, [<span class="string">&quot;A&quot;</span>]&#125;, <span class="symbol">:permanent</span>, <span class="number">5000</span>, <span class="symbol">:worker</span>,</span><br><span class="line">      [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;&#125;,</span><br><span class="line">    <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">     <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">  <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">  <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">  <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">  <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">  <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">  <span class="symbol">restarts:</span> [<span class="number">-576460714</span>, <span class="number">-576460714</span>, <span class="number">-576460714</span>],</span><br><span class="line">  <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="number">08</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:</span><span class="number">42.857723</span> &lt;<span class="number">0.384</span>.<span class="number">0</span>&gt; <span class="title class_">DynamicSupervisor</span>.handle_info/<span class="number">2</span> --&gt; &#123;<span class="symbol">:stop</span>, <span class="symbol">:shutdown</span>,</span><br><span class="line"> %<span class="title class_">DynamicSupervisor</span>&#123;</span><br><span class="line">   <span class="symbol">args:</span> <span class="symbol">:no_args</span>,</span><br><span class="line">   <span class="symbol">children:</span> %&#123;</span><br><span class="line">     <span class="comment">#PID&lt;0.402.0&gt; =&gt; &#123;&#123;Test.Worker, :start_link, [&quot;B&quot;]&#125;, :permanent, 5000,</span></span><br><span class="line">      <span class="symbol">:worker</span>, [<span class="title class_">Test</span>.<span class="title class_">Worker</span>]&#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="symbol">extra_arguments:</span> [],</span><br><span class="line">   <span class="symbol">max_children:</span> <span class="symbol">:infinity</span>,</span><br><span class="line">   <span class="symbol">max_restarts:</span> <span class="number">3</span>,</span><br><span class="line">   <span class="symbol">max_seconds:</span> <span class="number">5</span>,</span><br><span class="line">   <span class="symbol">mod:</span> <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>,</span><br><span class="line">   <span class="symbol">name:</span> &#123;<span class="symbol">:local</span>, <span class="title class_">Test</span>.<span class="title class_">Supervisor</span>&#125;,</span><br><span class="line">   <span class="symbol">restarts:</span> [<span class="number">-576460714</span>, <span class="number">-576460714</span>, <span class="number">-576460714</span>, <span class="number">-576460714</span>],</span><br><span class="line">   <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span></span><br><span class="line"> &#125;&#125;</span><br></pre></td></tr></table></figure>


  
	</div>
		<footer class="article-footer clearfix">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Sword/">Sword</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Elixir/">Elixir</a><a href="/tags/Supervisor/">Supervisor</a><a href="/tags/OTP/">OTP</a>
  </div>


<div class="article-share" id="share">

  <div data-url="http://www.thinkingincrowd.me/2020/10/27/message-communication-between-supervisor-and-child-processes-in-elixir/" data-title="Message communication between supervisor and child processes in Elixir | Thinking in Crowd / 鹄思乱想" data-tsina="kenspirit" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2020/11/15/are-you-a-bystander-or-victim/" title="你觉得自己是旁观者还是受害者？">
  <strong>PREVIOUS:</strong><br/>
  <span>
  你觉得自己是旁观者还是受害者？</span>
</a>
</div>


<div class="next">
<a href="/2020/09/06/multi-level-supervision-in-elixir/"  title="Multi-level dynamic supervision in Elixir">
 <strong>NEXT:</strong><br/> 
 <span>Multi-level dynamic supervision in Elixir
</span>
</a>
</div>

</nav>

	<section class="comment">
	
  
    <div id="disqus_thread"></div>
  
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Messages-for-itself"><span class="toc-number">1.</span> <span class="toc-text">Messages for itself</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Normal-Messages-between-Parent-and-Child"><span class="toc-number">2.</span> <span class="toc-text">Normal Messages between Parent and Child</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Message-for-Parent-Supervisor-Termination"><span class="toc-number">3.</span> <span class="toc-text">Message for Parent Supervisor Termination</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Why-the-case"><span class="toc-number">3.1.</span> <span class="toc-text">Why the case</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Which-direction"><span class="toc-number">3.2.</span> <span class="toc-text">Which direction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Process-exit"><span class="toc-number">3.3.</span> <span class="toc-text">Process.exit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Impact-of-Restart-Strategy"><span class="toc-number">3.4.</span> <span class="toc-text">Impact of Restart Strategy</span></a></li></ol></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
			<li><a href="/categories/Life/" title="Life">Life<sup>7</sup></a></li>
		
			<li><a href="/categories/Psychology/" title="Psychology">Psychology<sup>21</sup></a></li>
		
			<li><a href="/categories/Sword/" title="Sword">Sword<sup>66</sup></a></li>
		
			<li><a href="/categories/Think/" title="Think">Think<sup>80</sup></a></li>
		
		</ul>
</div>


  
  <div class="tagcloudlist">
    <p class="asidetitle">Tag Cloud</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/API/" style="font-size: 10px;">API</a> <a href="/tags/AWS/" style="font-size: 10.71px;">AWS</a> <a href="/tags/Ajax/" style="font-size: 10.71px;">Ajax</a> <a href="/tags/AngularJS/" style="font-size: 12.86px;">AngularJS</a> <a href="/tags/Architecture/" style="font-size: 10.71px;">Architecture</a> <a href="/tags/Asynchronous/" style="font-size: 10.71px;">Asynchronous</a> <a href="/tags/Attention/" style="font-size: 10px;">Attention</a> <a href="/tags/BTC/" style="font-size: 10px;">BTC</a> <a href="/tags/Babel/" style="font-size: 10px;">Babel</a> <a href="/tags/Belief/" style="font-size: 10.71px;">Belief</a> <a href="/tags/Bitcoin/" style="font-size: 10.71px;">Bitcoin</a> <a href="/tags/Blockchain/" style="font-size: 16.43px;">Blockchain</a> <a href="/tags/Blogging/" style="font-size: 10px;">Blogging</a> <a href="/tags/Book/" style="font-size: 12.86px;">Book</a> <a href="/tags/Bundling/" style="font-size: 10.71px;">Bundling</a> <a href="/tags/Business-Logic/" style="font-size: 11.43px;">Business Logic</a> <a href="/tags/Cache/" style="font-size: 10.71px;">Cache</a> <a href="/tags/Change/" style="font-size: 13.57px;">Change</a> <a href="/tags/Choice/" style="font-size: 10.71px;">Choice</a> <a href="/tags/Coach/" style="font-size: 10px;">Coach</a> <a href="/tags/Communication/" style="font-size: 12.86px;">Communication</a> <a href="/tags/Conflict/" style="font-size: 10px;">Conflict</a> <a href="/tags/Courage/" style="font-size: 10px;">Courage</a> <a href="/tags/DDD/" style="font-size: 10px;">DDD</a> <a href="/tags/Dapp/" style="font-size: 13.57px;">Dapp</a> <a href="/tags/Data-Modeling/" style="font-size: 10.71px;">Data Modeling</a> <a href="/tags/Database/" style="font-size: 10.71px;">Database</a> <a href="/tags/Death/" style="font-size: 10px;">Death</a> <a href="/tags/Delegation/" style="font-size: 10.71px;">Delegation</a> <a href="/tags/Design/" style="font-size: 11.43px;">Design</a> <a href="/tags/Destiny/" style="font-size: 11.43px;">Destiny</a> <a href="/tags/Distributed/" style="font-size: 12.14px;">Distributed</a> <a href="/tags/EOS/" style="font-size: 10px;">EOS</a> <a href="/tags/Education/" style="font-size: 10.71px;">Education</a> <a href="/tags/Elixir/" style="font-size: 17.14px;">Elixir</a> <a href="/tags/Emotion/" style="font-size: 10.71px;">Emotion</a> <a href="/tags/Empathy/" style="font-size: 11.43px;">Empathy</a> <a href="/tags/Ethereum/" style="font-size: 13.57px;">Ethereum</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/Experience/" style="font-size: 10.71px;">Experience</a> <a href="/tags/ExtJS/" style="font-size: 15px;">ExtJS</a> <a href="/tags/Father/" style="font-size: 10px;">Father</a> <a href="/tags/First-Principle/" style="font-size: 10.71px;">First Principle</a> <a href="/tags/Full-Stack/" style="font-size: 10px;">Full-Stack</a> <a href="/tags/Functional-Programming/" style="font-size: 14.29px;">Functional Programming</a> <a href="/tags/Goal/" style="font-size: 13.57px;">Goal</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Habit/" style="font-size: 10.71px;">Habit</a> <a href="/tags/Health/" style="font-size: 10.71px;">Health</a> <a href="/tags/Idempotency/" style="font-size: 10.71px;">Idempotency</a> <a href="/tags/Influence/" style="font-size: 10px;">Influence</a> <a href="/tags/Integration/" style="font-size: 10px;">Integration</a> <a href="/tags/JSConf/" style="font-size: 10.71px;">JSConf</a> <a href="/tags/JSON/" style="font-size: 10.71px;">JSON</a> <a href="/tags/Jasmine/" style="font-size: 14.29px;">Jasmine</a> <a href="/tags/Javascript/" style="font-size: 20px;">Javascript</a> <a href="/tags/Kanban/" style="font-size: 14.29px;">Kanban</a> <a href="/tags/Leadership/" style="font-size: 11.43px;">Leadership</a> <a href="/tags/Learning/" style="font-size: 10.71px;">Learning</a> <a href="/tags/Love/" style="font-size: 10.71px;">Love</a> <a href="/tags/MVC/" style="font-size: 15px;">MVC</a> <a href="/tags/Management/" style="font-size: 14.29px;">Management</a> <a href="/tags/Mature/" style="font-size: 10px;">Mature</a> <a href="/tags/Maven/" style="font-size: 10.71px;">Maven</a> <a href="/tags/MicroServices/" style="font-size: 10px;">MicroServices</a> <a href="/tags/Milestone/" style="font-size: 10px;">Milestone</a> <a href="/tags/Mnesia/" style="font-size: 11.43px;">Mnesia</a> <a href="/tags/Mocha/" style="font-size: 10px;">Mocha</a> <a href="/tags/Mock/" style="font-size: 11.43px;">Mock</a> <a href="/tags/Modularization/" style="font-size: 10.71px;">Modularization</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/Mood/" style="font-size: 12.14px;">Mood</a> <a href="/tags/Network/" style="font-size: 10px;">Network</a> <a href="/tags/Node-js/" style="font-size: 17.86px;">Node.js</a> <a href="/tags/OTP/" style="font-size: 10.71px;">OTP</a> <a href="/tags/Opportunity/" style="font-size: 10px;">Opportunity</a> <a href="/tags/POI/" style="font-size: 10px;">POI</a> <a href="/tags/Performance/" style="font-size: 10px;">Performance</a> <a href="/tags/Politics/" style="font-size: 10.71px;">Politics</a> <a href="/tags/Problem-Solving/" style="font-size: 11.43px;">Problem Solving</a> <a href="/tags/Productivity/" style="font-size: 11.43px;">Productivity</a> <a href="/tags/Programming/" style="font-size: 15.71px;">Programming</a> <a href="/tags/Promise/" style="font-size: 11.43px;">Promise</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Relationship/" style="font-size: 18.57px;">Relationship</a> <a href="/tags/Responsibility/" style="font-size: 11.43px;">Responsibility</a> <a href="/tags/Retrospect/" style="font-size: 19.29px;">Retrospect</a> <a href="/tags/Risk/" style="font-size: 10px;">Risk</a> <a href="/tags/Rule/" style="font-size: 10px;">Rule</a> <a href="/tags/SPA/" style="font-size: 10px;">SPA</a> <a href="/tags/Scrum/" style="font-size: 10px;">Scrum</a> <a href="/tags/Security/" style="font-size: 10px;">Security</a> <a href="/tags/Server/" style="font-size: 10.71px;">Server</a> <a href="/tags/Sharing/" style="font-size: 10px;">Sharing</a> <a href="/tags/Smart-Contract/" style="font-size: 13.57px;">Smart Contract</a> <a href="/tags/Source-Reading/" style="font-size: 12.86px;">Source Reading</a> <a href="/tags/Startup/" style="font-size: 12.14px;">Startup</a> <a href="/tags/Statistics/" style="font-size: 10px;">Statistics</a> <a href="/tags/Supervisor/" style="font-size: 10.71px;">Supervisor</a> <a href="/tags/Support/" style="font-size: 10px;">Support</a> <a href="/tags/Time-Management/" style="font-size: 10.71px;">Time Management</a> <a href="/tags/Trip/" style="font-size: 11.43px;">Trip</a> <a href="/tags/Tutorial/" style="font-size: 15px;">Tutorial</a> <a href="/tags/TypeScript/" style="font-size: 10.71px;">TypeScript</a> <a href="/tags/UED/" style="font-size: 10px;">UED</a> <a href="/tags/UI/" style="font-size: 10px;">UI</a> <a href="/tags/Unit-Test/" style="font-size: 15px;">Unit Test</a> <a href="/tags/Visualization/" style="font-size: 10px;">Visualization</a> <a href="/tags/Wechat/" style="font-size: 15px;">Wechat</a>
    </div>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> On the road to be a good father, husband, son and web developer, specialized in JS <br/>
			Playing around with Node.js, AngularJS.  Powering thinking through visualization.</p>
	</section>
	 
	<div class="social-font clearfix">
		
		<a href="http://weibo.com/kenspirit" target="_blank" title="weibo"></a>
		
		
		<a href="https://twitter.com/kenspirit" target="_blank" title="twitter"></a>
		
		
		<a href="https://github.com/kenspirit" target="_blank" title="github"></a>
		
		
		<a href="https://www.facebook.com/kenspirit" target="_blank" title="facebook"></a>
		
		
        <a href="https://www.linkedin.com/thinkingincrowd" target="_blank" title="linkedin"></a>
    
    
		  <script src='https://unpkg.com/mermaid@8.9.2/dist/mermaid.min.js'></script>
		  <script>
		    if (window.mermaid) {
		      mermaid.initialize({{ JSON.stringify(config.mermaid.options) }});
		    }
		  </script>
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2022 
		
		<a href="http://www.thinkingincrowd.me" target="_blank" title="鹄思乱想">鹄思乱想</a>
		
		</p>
</div>
</footer>
    
<script>
  var disqus_shortname = 'thinkingincrowd';
  
  var disqus_url = 'http://www.thinkingincrowd.me/2020/10/27/message-communication-between-supervisor-and-child-processes-in-elixir/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>





<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-37378953-1', 'www.thinkingincrowd.me');  
ga('send', 'pageview');
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8DKM4F4KH8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-8DKM4F4KH8');
</script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?796436d5d2646bb3157d9ac5bd7e7025";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


  </body>
</html>

