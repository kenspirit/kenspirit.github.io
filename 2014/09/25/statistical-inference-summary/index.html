
 <!DOCTYPE HTML>
<html >
<head>
  <script data-ad-client="ca-pub-3734008573442765" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <meta charset="UTF-8">
  
    <title>Statistical Inference 课后小结 | Thinking in Crowd / 鹄思乱想</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="鹄思乱想">
    
    <meta name="description" content="好不容易才把 Statistical Inference 的课上完, 真是有点吃力.  简略把教的东西列出来吧, 方便日后再复习.
概率条件概率 (Conditional Probability)当 B 发生的概率为 P(B) 时, A 发生的概率为 P(A|B) = P(A ∩ B) / P(B)">
    
    
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="kenspirit" />
    <meta name="twitter:title" content="Statistical Inference 课后小结 | Thinking in Crowd / 鹄思乱想" />
      
    
    
    <link rel="alternate" href="/atom.xml" title="Thinking in Crowd / 鹄思乱想" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/qmark.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/qmark.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.2.0"></head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Thinking in Crowd / 鹄思乱想" title="Thinking in Crowd / 鹄思乱想"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Thinking in Crowd / 鹄思乱想">Thinking in Crowd / 鹄思乱想</a></h1>
				<h2 class="blog-motto">Swan flying in the immense sky</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">Home</a></li>
					
						<li><a href="/about">About</a></li>
					
						<li><a href="/algorithm">Algorithm</a></li>
					
						<li><a href="/kanban">Kanban</a></li>
					
						<li><a href="/nodeppt">Slideshare</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:www.thinkingincrowd.me">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/09/25/statistical-inference-summary/" title="Statistical Inference 课后小结" itemprop="url">Statistical Inference 课后小结</a>
  </h1>
  <p class="article-author">By
    
      <a href="https://plus.google.com/108764880042816550000?rel=author" title="鹄思乱想" target="_blank" itemprop="author">鹄思乱想</a>
    </p>
  <p class="article-time">
    <time datetime="2014-09-25T14:58:46.000Z" itemprop="datePublished">Sep 25 2014</time>
    Updated:<time datetime="2022-08-28T08:07:15.425Z" itemprop="dateModified">Aug 28 2022</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E7%8E%87"><span class="toc-number">1.</span> <span class="toc-text">概率</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87-Conditional-Probability"><span class="toc-number">1.1.</span> <span class="toc-text">条件概率 (Conditional Probability)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bayes%E2%80%99-rule"><span class="toc-number">1.2.</span> <span class="toc-text">Bayes’ rule</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%8A%E6%96%AD%E6%B5%8B%E8%AF%95-Diagnostic-test"><span class="toc-number">1.3.</span> <span class="toc-text">诊断测试 (Diagnostic test)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%9F%E6%9C%9B%E5%80%BC-Expected-Value"><span class="toc-number">2.</span> <span class="toc-text">期望值 (Expected Value)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mean"><span class="toc-number">2.1.</span> <span class="toc-text">Mean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E5%B7%AE-Variance"><span class="toc-number">2.2.</span> <span class="toc-text">方差 (Variance)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">常见的概率分布模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%AF%E5%8A%AA%E5%88%A9%E5%88%86%E5%B8%83-Bernoulli-distribution"><span class="toc-number">3.1.</span> <span class="toc-text">伯努利分布 (Bernoulli distribution)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83-Normal-distribution"><span class="toc-number">3.2.</span> <span class="toc-text">正态分布 (Normal distribution)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Poisson-distribution"><span class="toc-number">3.3.</span> <span class="toc-text">(Poisson distribution)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%90%E8%BF%91-Asymptotics"><span class="toc-number">4.</span> <span class="toc-text">渐近 (Asymptotics)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E6%95%B0%E5%AE%9A%E5%BE%8B-Law-of-Large-Number"><span class="toc-number">4.1.</span> <span class="toc-text">大数定律 (Law of Large Number)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E5%BF%83%E6%9E%81%E9%99%90%E5%AE%9A%E7%90%86-Central-Limit-Theorem"><span class="toc-number">4.2.</span> <span class="toc-text">中心极限定理 (Central Limit Theorem)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Confidence-Intervals"><span class="toc-number">4.3.</span> <span class="toc-text">Confidence Intervals</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#T-Confidence-Intervals"><span class="toc-number">4.4.</span> <span class="toc-text">T Confidence Intervals</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hypothesis-testing"><span class="toc-number">5.</span> <span class="toc-text">Hypothesis testing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">5.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.2.</span> <span class="toc-text">错误类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Upper-Lower-and-Two-Failed-Test"><span class="toc-number">5.3.</span> <span class="toc-text">Upper, Lower, and Two Failed Test</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%92%8C-Confidence-Interval-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">5.4.</span> <span class="toc-text">和 Confidence Interval 的关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P-values"><span class="toc-number">6.</span> <span class="toc-text">P-values</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Power"><span class="toc-number">7.</span> <span class="toc-text">Power</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Multiple-testing"><span class="toc-number">8.</span> <span class="toc-text">Multiple testing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Types-of-Error"><span class="toc-number">8.1.</span> <span class="toc-text">Types of Error</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Error-Rates"><span class="toc-number">8.2.</span> <span class="toc-text">Error Rates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Correction"><span class="toc-number">8.3.</span> <span class="toc-text">Correction</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Resampled-inference"><span class="toc-number">9.</span> <span class="toc-text">Resampled inference</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#jackknife"><span class="toc-number">9.1.</span> <span class="toc-text">jackknife</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bootstrap"><span class="toc-number">9.2.</span> <span class="toc-text">bootstrap</span></a></li></ol></li></ol>
		</div>
		
		<p>好不容易才把 <a target="_blank" rel="noopener" href="https://www.coursera.org/course/statinference">Statistical Inference</a> 的课上完, 真是有点吃力.  简略把教的东西列出来吧, 方便日后再复习.</p>
<h2 id="概率"><a href="#概率" class="headerlink" title="概率"></a>概率</h2><h3 id="条件概率-Conditional-Probability"><a href="#条件概率-Conditional-Probability" class="headerlink" title="条件概率 (Conditional Probability)"></a>条件概率 (Conditional Probability)</h3><p>当 B 发生的概率为 P(B) 时, A 发生的概率为 <code>P(A|B) = P(A ∩ B) / P(B)</code>.<br>如果 A 和 B 是完全独立的事件, 那么 <code>P(A|B) = P(A)P(B) / P(B) = P(A)</code>.</p>
<h3 id="Bayes’-rule"><a href="#Bayes’-rule" class="headerlink" title="Bayes’ rule"></a>Bayes’ rule</h3><p><code>P(B|A) = P(A|B)P(B) / (P(A|B)P(B) + P(A|B𝑐)P(B𝑐))</code></p>
<p><code>P(B𝑐) = 1 - P(B)</code></p>
<h3 id="诊断测试-Diagnostic-test"><a href="#诊断测试-Diagnostic-test" class="headerlink" title="诊断测试 (Diagnostic test)"></a>诊断测试 (Diagnostic test)</h3><p>首先, 诊断测试里面有几个定义先要搞清楚：</p>
<ul>
<li><em>+</em> 测试为患病的情况</li>
<li><em>-</em> 测试为没有患病的情况</li>
<li><em>D</em> 确定患病的情况</li>
<li><em>D𝑐</em> 确定没有患病的情况</li>
<li><em>sensitivity</em> 当确实患病时, 测试为患病的概率 <code>P(+ | D)</code></li>
<li><em>specificity</em> 当确实没有患病时, 测试为没有患病的概率 <code>P(- | D𝑐)</code></li>
<li><em>positive predictive value</em> <code>P(D | +)</code></li>
<li><em>negative predictive value</em> <code>P(D𝑐 | -)</code></li>
<li><em>prevalance of the disease</em> <code>P(D)</code></li>
</ul>
<p>有个很有趣的例子：<br>假如在一项 HIV 的研究中, 有一种 HIV 抗体检查的 sensitivity 是 99.7%, specificity 是 98.5%. (看起来这个抗体检查应该很准, 对吧？)  如果一个人, 从 0.1% prevalence HIV 的群体中抽出来, 他做了这个抗体检查后, 结果是阳性也就是检查结果显示他应该有 HIV.  那么, 你觉得他确实患病的概率有多高呢？</p>
<p>那我们来看看 positive predictive value 也就是 <code>P(D | +)</code> 概率是多少.  用 Bayes’ rule 公式代入去算一下可得 0.062.  不是很高吧？这么低的数值是由于低 prevalence 造成的。但是如果说你知道那个人是有用毒品习惯, 并且和 HIV 人士有接触。你会不会觉得他患病的概率更高？  其实影响的因素 prevalence 一点没变, 可是我们对所谓证据的诠释不同了.</p>
<p><strong>Likelihood ratios</strong></p>
<p><strong>DLR+</strong>, diagnostic likeihood ratio of a positive test, is <code>P(+ | D) / P(+ | D𝑐)</code></p>
<pre><code>`sensitivity / (1 - specificity)`
</code></pre>
<p><strong>DLR-</strong>, diagnostic likeihood ratio of a negative test, is <code>P(- | D) / P(- | D𝑐)</code></p>
<pre><code>`(1 - sensitivity) / specificity`
</code></pre>
<p>根据 Bayes’ rule 可以推导出：</p>
<p><code>P(D | +) / P(D𝑐 | +) = DLR+ * P(D) / P(D𝑐)</code></p>
<p>post-test odds of D &#x3D; DLR+ * pre-test odds of D  (odds: 一个概率除以 1 减去它)</p>
<p>相同道理： <code>P(D | -) / P(D𝑐 | -) = DLR- * P(D) / P(D𝑐)</code></p>
<p><strong>IID</strong></p>
<ul>
<li><em>Independent</em>: statistically unrelated from one and another</li>
<li><em>Identically distributed</em>: all having been drawn from the same population distribution</li>
</ul>
<h2 id="期望值-Expected-Value"><a href="#期望值-Expected-Value" class="headerlink" title="期望值 (Expected Value)"></a>期望值 (Expected Value)</h2><p><strong>Mean</strong>: 分布的中值特征<br><strong>Variance</strong> 和 <strong>Standard Deviation</strong>: 分布性的特征 (How spread out)</p>
<p>Sample expected values 是用来推测 population 的特征的。</p>
<p><code>E[X] = ∑ xp(x)</code> 表示了数据分布的位置和权重的中值。比如, 丟硬币:</p>
<p><code>E[X] = 0 * 0.5 + 1 * 0.5 = 0.5</code></p>
<p>如果说硬币正反不是概率均等, 而是正面的概率为 <code>p</code>, 那 <code>E[X] = 0 * (1 - p) + 1 * p = p</code></p>
<p>同理掷骰子, 数字面值的中值, 那就是 <code>E[X] = 1 * 1/6 + 2 * 1/6 + ... + 6 * 1/6 = 3.5</code></p>
<h3 id="Mean"><a href="#Mean" class="headerlink" title="Mean"></a>Mean</h3><p>通过取样, 来获取中值, 这个中值本身, 其实也是随机变量, 它的分布也是有个中值的。这个中值, 如果和它原来要推导的中值本身是一致的, 我们就会说这个推导是公正的 (unbiased)。</p>
<p>这个说法有点拗口, 其实是这样的是. 比如说, 丟硬币本身的中值是 0.5.  那么, 我们有两种做法：</p>
<ol>
<li>一种是丢一次硬币, 记录下一次 0 或者 1, 重复丢 n 次, 然后算它本身的中值就是 0.5.  无限下去的理论值就是 population mean.</li>
<li>另一种就是丢 m 次硬币, 先算一次中值 (sample mean), 记录下这个中值, 再重复丢 n 次, 最后再算一次中值. 其实也就是中值的中值.</li>
</ol>
<p><em>中值的中值</em> 如果说和 population mean 是一致的, 那这个推导就是公正的了. 而且, 如果算 sample mean 的数据 (上面的 m) 越多, 那么中值分布的质量函数 (density &#x2F; mass function) 最越集中在 population mean.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GetSampleMean <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="punctuation">(</span>count<span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">  data.frame<span class="punctuation">(</span>mean <span class="operator">=</span> replicate<span class="punctuation">(</span><span class="number">5000</span><span class="punctuation">,</span> mean<span class="punctuation">(</span>sample<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> count<span class="punctuation">,</span> replace <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> cnt <span class="operator">=</span> count<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">data.df <span class="operator">&lt;-</span> rbind<span class="punctuation">(</span>GetSampleMean<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">,</span> GetSampleMean<span class="punctuation">(</span><span class="number">20</span><span class="punctuation">)</span><span class="punctuation">,</span> GetSampleMean<span class="punctuation">(</span><span class="number">30</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">library<span class="punctuation">(</span>ggplot2<span class="punctuation">)</span></span><br><span class="line">qplot<span class="punctuation">(</span>x <span class="operator">=</span> mean<span class="punctuation">,</span> data <span class="operator">=</span> data.df<span class="punctuation">,</span> facets <span class="operator">=</span> . <span class="operator">~</span> cnt<span class="punctuation">,</span> fill <span class="operator">=</span> cnt<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<img alt="Sample Mean" src="https://raw.githubusercontent.com/kenspirit/blog-cdn-data/master/sample_mean.png"/>


<h3 id="方差-Variance"><a href="#方差-Variance" class="headerlink" title="方差 (Variance)"></a>方差 (Variance)</h3><p>随机变量到中值的距离 <code>Var(X) = E[(X - μ)2] = E[X²] - E[X]²</code></p>
<p>假如一个硬币正面的概率是 p.  那它的 Variance 就是:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E[X] = 0 * (1 - p) + 1 * p = p</span><br><span class="line">E[X²] = E[X] = p</span><br><span class="line">Var(X) = E[X²] - E[X]² = p - p² = p(1 - p)</span><br></pre></td></tr></table></figure>

<p><strong>标准差 (Standard Deviation)</strong>: Variance 的平方根, S<br><strong>标准误 (Standard Error)</strong>: S&#x2F;√n</p>
<p>同中值一样, 样本的 Variance, S², 也是随机变量, 它的分布也是集中在 population variance, σ².</p>
<h2 id="常见的概率分布模型"><a href="#常见的概率分布模型" class="headerlink" title="常见的概率分布模型"></a>常见的概率分布模型</h2><h3 id="伯努利分布-Bernoulli-distribution"><a href="#伯努利分布-Bernoulli-distribution" class="headerlink" title="伯努利分布 (Bernoulli distribution)"></a>伯努利分布 (Bernoulli distribution)</h3><p>又名两点分布或者 0-1 分布.  通常定 1 值的概率为 p, 0 值的概率为 (1 - p).  它的中值为 p, 方差为 p(1 - p).</p>
<p><strong>伯努利試驗 (Binomial trial)</strong></p>
<p>这个试验的随机变量，其实是伯努利分布随机值的总和 <code>X = ∑ⁿXᵢ</code>, Xᵢ 为 Bernoulli(p).</p>
<p>它的质量函数 (mass function) 是: <code>P(X = x) = (n x) * pˣ * (1 - p)ⁿ⁻ˣ</code>. <code>(n x)</code> 是从 n 中取 x 的组合数.</p>
<p>举个例子说，如果一个家庭有 8 个孩子, 7 个是女的，没有孪生.  如果生男生女的概率为 0.5, 那么 8 个孩子中，生 7 个或以上的女孩概率是多大?</p>
<p><code>(8 7) * 0.5⁷ * (1 - 0.5)¹ + (8 8) * 0.5⁸ * (1 - 0.5)⁰ ≈ 0.04</code></p>
<p>对应的 R 代码为:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">choose<span class="punctuation">(</span><span class="number">8</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">)</span> <span class="operator">*</span> <span class="number">0.5</span><span class="operator">^</span><span class="number">8</span> <span class="operator">+</span> choose<span class="punctuation">(</span><span class="number">8</span><span class="punctuation">,</span> <span class="number">8</span><span class="punctuation">)</span> <span class="operator">*</span> <span class="number">0.5</span><span class="operator">^</span><span class="number">8</span></span><br><span class="line"></span><br><span class="line">pbinom<span class="punctuation">(</span><span class="number">6</span><span class="punctuation">,</span> size <span class="operator">=</span> <span class="number">8</span><span class="punctuation">,</span> prob <span class="operator">=</span> <span class="number">0.5</span><span class="punctuation">,</span> lower.tail <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>


<h3 id="正态分布-Normal-distribution"><a href="#正态分布-Normal-distribution" class="headerlink" title="正态分布 (Normal distribution)"></a>正态分布 (Normal distribution)</h3><p>如果它的中值是 μ, 方差是 σ², 它的表达式可以写成 <code>X ~ N(μ, σ²)</code>.  如果 μ &#x3D; 0, σ² &#x3D; 1, 它就是标准正态分布, 通常用 Z 来表示.</p>
<p>如果一个随机分布是正态分布 <code>X ~ N(μ, σ²)</code>, 那么经过 <code>(X - μ) / σ</code> 转换后的随机变量就会是标准正态分布.<br>反过来，如果 Z 是标准正态分布, <code>X = μ + σZ ~ N(μ, σ²)</code>.</p>
<p><strong>正态分布的特性</strong></p>
<ol>
<li>68%, 95%, 99% 的正态质量在 1, 2, 3 的标准差内.</li>
<li>-1.28， -1.645， -1.96， -2.33 分别是标准正态分布的 10th, 5th, 2.5th, 1st 区域</li>
<li>由于对称性, 1.28， 1.645， 1.96， 2.33 分别是标准正态分布的 90th, 95th, 97.5th, 99th 区域</li>
</ol>
<p>比如说 N(μ, σ²) 分布的 95th percentile 是多少?</p>
<p><code>μ + σ * 1.645</code> 或者</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qnorm<span class="punctuation">(</span><span class="number">.95</span><span class="punctuation">,</span> mean <span class="operator">=</span> μ<span class="punctuation">,</span> sd <span class="operator">=</span> σ<span class="punctuation">)</span>`</span><br></pre></td></tr></table></figure>

<p>再举个例.  如果一个网面的点击数平均值在 1020, 标准差在 50, 那么点击数超过 1160 的概率是多少?</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnorm<span class="punctuation">(</span><span class="number">1160</span><span class="punctuation">,</span> mean <span class="operator">=</span> <span class="number">1120</span><span class="punctuation">,</span> sd <span class="operator">=</span> <span class="number">50</span><span class="punctuation">,</span> lower.tail <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>


<h3 id="Poisson-distribution"><a href="#Poisson-distribution" class="headerlink" title="(Poisson distribution)"></a>(Poisson distribution)</h3><p>它的中值和方差都是 λ.  可用于对 counts, event-time or survival data, contingency table 进行建模.<br>当随机变量的 n 很大，概率 p 很小的时候，Poisson 的分布可以用于近似于 Binomial 分布.</p>
<p>当它用来对速率的随机变量建模时:</p>
<p><code>X ~ Poisson(λt)</code></p>
<ul>
<li>λ &#x3D; E[X&#x2F;t] 表示在单位时间内的数量</li>
<li>t 是总时间</li>
</ul>
<p>比如说人出现在公交站的数量是 Poisson 分布.  假如每小时 2.5 个人, 如果我们观察 4 个小时, 3 个或者少于 3 个人的概率是多大?</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ppois<span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span> lambda <span class="operator">=</span> <span class="number">2.5</span> <span class="operator">*</span> <span class="number">4</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>



<h2 id="渐近-Asymptotics"><a href="#渐近-Asymptotics" class="headerlink" title="渐近 (Asymptotics)"></a>渐近 (Asymptotics)</h2><h3 id="大数定律-Law-of-Large-Number"><a href="#大数定律-Law-of-Large-Number" class="headerlink" title="大数定律 (Law of Large Number)"></a>大数定律 (Law of Large Number)</h3><p>对于 IID 的随机值来说, 只要取的样本足够多, 它的平均值, 最终会和理论的 population mean 是一致的.</p>
<h3 id="中心极限定理-Central-Limit-Theorem"><a href="#中心极限定理-Central-Limit-Theorem" class="headerlink" title="中心极限定理 (Central Limit Theorem)"></a>中心极限定理 (Central Limit Theorem)</h3><p>对于 IID 的随机值来说, 只要取的样本足够多, 它的平均值的分布会呈现出正态分布.</p>
<p>样本 Xₙ 可以说是基本呈现出为 <code>N(μ, σ²/n)</code> 的正态分布.</p>
<h3 id="Confidence-Intervals"><a href="#Confidence-Intervals" class="headerlink" title="Confidence Intervals"></a>Confidence Intervals</h3><p>对于正态分布来说，随机值 X 大于 <code>μ + 2σ/√n</code> 或者小于 <code>μ - 2σ/√n</code> 的概率只有 5%.  那么 <code>X ± 2σ/√n</code> 就叫做 μ 的 95% 区间.</p>
<p><code>Est ± ZQ * SE</code></p>
<h3 id="T-Confidence-Intervals"><a href="#T-Confidence-Intervals" class="headerlink" title="T Confidence Intervals"></a>T Confidence Intervals</h3><p><code>Est ± TQ * SE</code></p>
<p>一般如果要进行分组之间的数据比较，会把分级之间的数据差，做 t interval 分析.</p>
<p>比如 R 里面的 Sleep data, 分别比较两组不同的药物，对人的睡眠质量的影响.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">data<span class="punctuation">(</span>sleep<span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>sleep<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##   extra group ID</span></span><br><span class="line"><span class="comment">## 1   0.7     1  1</span></span><br><span class="line"><span class="comment">## 2  -1.6     1  2</span></span><br><span class="line"><span class="comment">## 3  -0.2     1  3</span></span><br><span class="line"><span class="comment">## 4  -1.2     1  4</span></span><br><span class="line"><span class="comment">## 5  -0.1     1  5</span></span><br><span class="line"><span class="comment">## 6   3.4     1  6</span></span><br><span class="line"></span><br><span class="line">g1 <span class="operator">&lt;-</span> sleep<span class="operator">$</span>extra<span class="punctuation">[</span><span class="number">1</span> <span class="operator">:</span> <span class="number">10</span><span class="punctuation">]</span></span><br><span class="line">g2 <span class="operator">&lt;-</span> sleep<span class="operator">$</span>extra<span class="punctuation">[</span><span class="number">11</span> <span class="operator">:</span> <span class="number">20</span><span class="punctuation">]</span></span><br><span class="line">difference <span class="operator">&lt;-</span> g2 <span class="operator">-</span> g1</span><br><span class="line">mn <span class="operator">&lt;-</span> mean<span class="punctuation">(</span>difference<span class="punctuation">)</span></span><br><span class="line">s <span class="operator">&lt;-</span> sd<span class="punctuation">(</span>difference<span class="punctuation">)</span></span><br><span class="line">n <span class="operator">&lt;-</span> 10</span><br><span class="line"></span><br><span class="line">mn <span class="operator">+</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="operator">-</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span> <span class="operator">*</span> qt<span class="punctuation">(</span><span class="number">.975</span><span class="punctuation">,</span> n<span class="operator">-</span><span class="number">1</span><span class="punctuation">)</span> <span class="operator">*</span> s <span class="operator">/</span> <span class="built_in">sqrt</span><span class="punctuation">(</span>n<span class="punctuation">)</span></span><br><span class="line">t.test<span class="punctuation">(</span>difference<span class="punctuation">)</span></span><br><span class="line">t.test<span class="punctuation">(</span>g2<span class="punctuation">,</span> g1<span class="punctuation">,</span> paired <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##        [,1] [,2]</span></span><br><span class="line"><span class="comment">## [1,] 0.7001 2.46</span></span><br><span class="line"><span class="comment">## [2,] 0.7001 2.46</span></span><br></pre></td></tr></table></figure>

<p>上面的比较是把数据认为是 <code>paired = TRUE</code> 的.</p>
<p>那如果是<strong>独立</strong>分组的数据的 t interval (<strong>恒定标准差</strong>的情况下) 怎么计算呢?<br>假如我们要计算 μᵧ - μₓ 的 (1 - α) * 100% 信心区间,</p>
<p><code>Y - X ± tₙₓ₊ₙᵧ₋₂ * Sₚ * ( 1 / nₓ + 1 / nᵧ)^0.5</code></p>
<p><code>Sₚ² = &#123;(nₓ - 1) * Sₓ² + (nᵧ - 1) * Sᵧ²&#125; / (nₓ + nᵧ - 2)</code></p>
<p>下面的比较是把数据认为是 <code>paired = FALSE</code> 的.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sp <span class="operator">&lt;-</span> <span class="built_in">sqrt</span><span class="punctuation">(</span> <span class="punctuation">(</span><span class="punctuation">(</span>n1 <span class="operator">-</span> <span class="number">1</span><span class="punctuation">)</span> <span class="operator">*</span> sd<span class="punctuation">(</span>x1<span class="punctuation">)</span><span class="operator">^</span><span class="number">2</span> <span class="operator">+</span> <span class="punctuation">(</span>n2<span class="operator">-</span><span class="number">1</span><span class="punctuation">)</span> <span class="operator">*</span> sd<span class="punctuation">(</span>x2<span class="punctuation">)</span><span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span> <span class="operator">/</span> <span class="punctuation">(</span>n1 <span class="operator">+</span> n2<span class="operator">-</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">semd <span class="operator">&lt;-</span> sp<span class="operator">*</span><span class="built_in">sqrt</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">/</span>n1<span class="operator">+</span><span class="number">1</span><span class="operator">/</span>n2<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">md <span class="operator">+</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="operator">-</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span> <span class="operator">*</span> qt<span class="punctuation">(</span><span class="number">.975</span><span class="punctuation">,</span>n1<span class="operator">+</span>n2<span class="operator">-</span><span class="number">2</span><span class="punctuation">)</span> <span class="operator">*</span> semd</span><br><span class="line">t.test<span class="punctuation">(</span>g2<span class="punctuation">,</span> g1<span class="punctuation">,</span> paired <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">,</span> var.equal <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span><span class="operator">$</span>conf</span><br><span class="line"></span><br><span class="line"><span class="comment">##         [,1]  [,2]</span></span><br><span class="line"><span class="comment">## [1,] -0.2039 3.364</span></span><br><span class="line"><span class="comment">## [2,] -0.2039 3.364</span></span><br></pre></td></tr></table></figure>

<p>可见两次的结果是非常不同的.  那到底怎么决定数据是否是 pair, 是否是独立的呢？</p>
<p>比如说, 如果我们要检测非吸烟者和吸烟者的 BMI 指数, 因为这两组人群是完全不同的, 所以就是独立的.<br>或者说如果测试完全分开的两组一员, 一组使用药物, 一组使用安慰剂来测试药物的效用, 这也是独立的.</p>
<p>但如果说测试是同一组人员, 使用药物前后的比较, 那就应该是 paired.</p>
<p>那如果是<strong>独立</strong>分组的数据的 t interval (<strong>非恒定标准差</strong>的情况下) 怎么计算呢?</p>
<p><code>Y - X ± tdf * ( Sₓ² / nₓ + Sᵧ² / nᵧ)^0.5</code></p>
<p>tdf 里面的 degree of freedom 的计算为:</p>
<p><code>df = ( Sₓ² / nₓ + Sᵧ² / nᵧ)² / &#123;(Sₓ² / nₓ)² / (nₓ - 1) + (Sᵧ² / nᵧ)² / (nᵧ - 1)&#125;</code></p>
<p>参考链接: <a target="_blank" rel="noopener" href="http://sphweb.bumc.bu.edu/otlt/MPH-Modules/BS/BS704_Confidence_Intervals/BS704_Confidence_Intervals.html">http://sphweb.bumc.bu.edu/otlt/MPH-Modules/BS/BS704_Confidence_Intervals/BS704_Confidence_Intervals.html</a></p>
<h2 id="Hypothesis-testing"><a href="#Hypothesis-testing" class="headerlink" title="Hypothesis testing"></a>Hypothesis testing</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>H₀, H-nought, 通常代表 “没有关联”, “没有影响” 的观点，又称为零假设.  它是目前要测试和证明的假设, 通常先被假定为正确的, 然后希望用统计数据来证明为错误或者需要慎重考虑的假设.</p>
<p>Hₐ, (alternative hypothesis) 就是对应的希望被证明为正确的假设.</p>
<p>比如说, Centers for Disease Control (CDC) 报道了从 1960 到 2002 年的身高体重质量指数趋势.  报告认为美国人在 2002 年比 1960 年重了很多, 而只是高了一点; 无论男女平均大约增加 24 磅.  在 2002 年, 男性平均体重为 191 磅.  假定有调查者认为到 2006 年, 也就是说男性平均体重将多于 191 磅.  那我们就可以把体重没有变化的推测定义为 H₀.</p>
<pre><code>Null Hypothesis      H₀: μ = 191         (没变化)
Research Hypothesis  Hₐ: μ &gt; 191         (调查人员的假定推测)
</code></pre>
<p>为了验证这个假定, 我们在 2006 年随机选定了一组美国男性来测量体重.  如果我们抽取的样本为 n &#x3D; 100 人, 测量结果为: <code>X = 197.1, s = 25.6</code>:</p>
<p><code>P(X &gt; 197.1) = P(Z &gt; (197.1 - 191) / (25.6 / √100)) = P(Z &gt; 2.38) = 1 - 0.9913 = 0.0087</code></p>
<p>也就是说, 如果说体重没有变化, 取样得到平均値为 197.1 的可能性还不到 1%.  那我们说 H₀ 是否成立呢?</p>
<p>样例取自: <a target="_blank" rel="noopener" href="http://sphweb.bumc.bu.edu/otlt/MPH-Modules/BS/BS704_HypothesisTest-Means-Proportions/">http://sphweb.bumc.bu.edu/otlt/MPH-Modules/BS/BS704_HypothesisTest-Means-Proportions/</a></p>
<h3 id="错误类型"><a href="#错误类型" class="headerlink" title="错误类型"></a>错误类型</h3><p><strong>Type I Error</strong>:  当事实为 H₀ 时，我们推测出的结果为 Hₐ<br><strong>Type II Error</strong>:  当事实为 Hₐ 时，我们推测出的结果为 H₀</p>
<p>现在我们尝试把场景应用到法律当中, H₀ 为被控方是无罪的.  那么我们就需要找到一个标准来断定他是有罪的 (Reject H₀).  假如标准太高, 把无罪的人错误定罪的可能性就变高了 (Type I Error).  相反标准低了, Type II Error 就高了.</p>
<p>所以, 其中一种做法就是选出一个常量 C (Critical Value), 使得样本的平均值 X 比它大时, 我们可以 Reject H₀.  要得到这个 C, 我们先要定出 α (level of significance), 来表示说如果在 H₀ 为真的时候, 我们却 Reject 了它的可能性, 也就是 Type I Error <code>P(X &gt; C; H₀) = 5%</code>.</p>
<h3 id="Upper-Lower-and-Two-Failed-Test"><a href="#Upper-Lower-and-Two-Failed-Test" class="headerlink" title="Upper, Lower, and Two Failed Test"></a>Upper, Lower, and Two Failed Test</h3><p>一般来说, 对应 H₀, Hₐ 有下面三种形式:</p>
<pre><code>H₁ : μ &lt; μ₀
H₂ : μ ≠ μ₀
H₃ : μ &gt; μ₀
</code></pre>
<p>所以, 如果说 <code>TS (Test Statistic) = (X - μ) / (s/√n)</code> 的话, 以下的情况就分别可以 Reject H₀:</p>
<pre><code> TS  ≤ Zₐ
|TS| ≥ Z₁₋ₐ∕₂
 TS  ≥ Z₁₋ₐ
</code></pre>
<h3 id="和-Confidence-Interval-的关系"><a href="#和-Confidence-Interval-的关系" class="headerlink" title="和 Confidence Interval 的关系"></a>和 Confidence Interval 的关系</h3><p>对于 μ 来说, (1 - α) * 100% 的 confidence interval 范围内的所有的值, 都无法 (Failed to) Reject H₀.</p>
<h2 id="P-values"><a href="#P-values" class="headerlink" title="P-values"></a>P-values</h2><p>P-value 就是在 H₀ 的前提下, 观测到的样本值出现的可能性.  如果这个可能性很少, 要么 H₀ 为真, 并且我们观测到的值很极端, 要么 H₀ 为假.</p>
<p>P-value 和 α (level of significance) 是不同的.  P-value 只是简单描述了在 H₀ 情况下, 某值出现的可能性. α 则是我们选定的用来判定是否 Reject H₀ 的标准.  当 P-value 小于 α 的时候，我们就可以 Reject H₀.</p>
<p>two sided hypothesis test, double the smaller of the two “one sided hypothesis test P-values”.</p>
<p>比如下面一个例子:</p>
<p>有 18 位肥胖人士, 随机抽取 9 位服用新的减肥药, 9 位服用安慰剂.  4 星期后测量的 BMI 指数的平均变化为, 服用减肥药的为 -3kg&#x2F;m2, 服用安慰剂的为 1kg&#x2F;m2.  两组人员的标准差为 1.5kg&#x2F;m2 和 1.8kg&#x2F;m2.  那么现在的 BMI 变化对使不使用减肥药有区别吗?  假定数据是正态的, 并且 population variance 是相同的, 尝试给出 two sided t test 的 P-value.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">n1 <span class="operator">&lt;-</span> n2 <span class="operator">&lt;-</span> 9</span><br><span class="line">x1 <span class="operator">&lt;-</span> <span class="operator">-</span><span class="number">3</span>  <span class="comment">## treated</span></span><br><span class="line">x2 <span class="operator">&lt;-</span> 1  <span class="comment">## placebo</span></span><br><span class="line">s1 <span class="operator">&lt;-</span> 1.5  <span class="comment">## treated</span></span><br><span class="line">s2 <span class="operator">&lt;-</span> 1.8  <span class="comment">## placebo</span></span><br><span class="line">s <span class="operator">&lt;-</span> <span class="built_in">sqrt</span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">(</span>n1 <span class="operator">-</span> <span class="number">1</span><span class="punctuation">)</span> <span class="operator">*</span> s1<span class="operator">^</span><span class="number">2</span> <span class="operator">+</span> <span class="punctuation">(</span>n2 <span class="operator">-</span> <span class="number">1</span><span class="punctuation">)</span> <span class="operator">*</span> s2<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span><span class="operator">/</span><span class="punctuation">(</span>n1 <span class="operator">+</span> n2 <span class="operator">-</span> <span class="number">2</span><span class="punctuation">)</span><span class="punctuation">)</span>  <span class="comment"># 恒定标准差, 独立分组的数据</span></span><br><span class="line">ts <span class="operator">&lt;-</span> <span class="punctuation">(</span>x1 <span class="operator">-</span> x2<span class="punctuation">)</span> <span class="operator">/</span> <span class="punctuation">(</span>s <span class="operator">*</span> <span class="built_in">sqrt</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">/</span>n1 <span class="operator">+</span> <span class="number">1</span><span class="operator">/</span>n2<span class="punctuation">)</span><span class="punctuation">)</span>  <span class="comment"># Test statistic</span></span><br><span class="line"><span class="number">2</span> <span class="operator">*</span> pt<span class="punctuation">(</span>ts<span class="punctuation">,</span> n1 <span class="operator">+</span> n2 <span class="operator">-</span> <span class="number">2</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>


<h2 id="Power"><a href="#Power" class="headerlink" title="Power"></a>Power</h2><p>当事实为 Hₐ 时, 我们推测出的结果为 Hₐ 的可能性 (sensitivity).</p>
<p>Power &#x3D; 1 - β (Type II error rate)</p>
<p>假如我们要推测的 Hₐ 为 μ &gt; μ₀:</p>
<p>Power &#x3D; P((X - μ₀) &#x2F; (σ&#x2F;√n) &gt; z₁₋ₐ | μ &#x3D; μₐ)  # 当 μₐ 趋近 μ₀ 时, Power 趋近 α<br>      &#x3D; P((X - μₐ + μₐ - μ₀) &#x2F; (σ&#x2F;√n) &gt; z₁₋ₐ | μ &#x3D; μₐ)<br>      &#x3D; P((X - μₐ) &#x2F; (σ&#x2F;√n) &gt; z₁₋ₐ - (μₐ - μ₀) &#x2F; (σ&#x2F;√n) | μ &#x3D; μₐ)<br>      &#x3D; P(Z &gt; z₁₋ₐ - (μₐ - μ₀) &#x2F; (σ&#x2F;√n) | μ &#x3D; μₐ)<br>      &#x3D; P(Z &gt; zβ)</p>
<p><em>z₁₋ₐ 为标准正态分布在 α 的区域值如 1.645 (5%)</em></p>
<p>假定在 H₀:μ &#x3D; μ₀ 的情况下, 统计数据为 N(0, 1) 的正态分布, 那么在 Hₐ:μ &#x3D; μₐ 的情况下, 统计数据就为 N((μₐ - μ₀) &#x2F; (σ&#x2F;√n), 1) 的正态分布.  所以，也可以通过 <code>pnorm(1.645, mean = (μₐ - μ₀) / (σ/√n), sd = 1, lower.tail = F)</code> 来计算出 Power.</p>
<p>根据上面的推理, 我们还可以得出一个等式: <code>z₁₋ₐ - (μₐ - μ₀) / (σ/√n) = zβ</code>.<br>也就是说 Power 和 <code>(μₐ - μ₀) / (σ/√n)</code> 的比值相关.  <code>(μₐ - μ₀) / σ</code> 为 effect size.</p>
<h2 id="Multiple-testing"><a href="#Multiple-testing" class="headerlink" title="Multiple testing"></a>Multiple testing</h2><h3 id="Types-of-Error"><a href="#Types-of-Error" class="headerlink" title="Types of Error"></a>Types of Error</h3><pre><code>              β = 0   β ≠ 0   Hypotheses
Claim β = 0   U       T       m - R
Claim β ≠ 0   V       S       R
Claims        m₀      m - m₀  m
</code></pre>
<p><strong>m</strong> - total number of hypotheses tested<br><strong>m₀</strong> - number of true H₀<br><strong>m - m₀</strong> - number of true Hₐ<br><strong>V</strong> - number of false positive (Type I error &#x2F; false discoveries)<br><strong>S</strong> - number of true positive (true discoveries)<br><strong>T</strong> - number of false negative (Type II error)<br><strong>U</strong> - number of true negative<br><strong>R</strong> - number of rejected H₀</p>
<h3 id="Error-Rates"><a href="#Error-Rates" class="headerlink" title="Error Rates"></a>Error Rates</h3><p><strong>False positive rate</strong> - The rate at which false results (β &#x3D; 0) are called significant: E[V&#x2F;m₀]<br><strong>Family wise error rate (FWER)</strong> - The probability of at least one false positive Pr(V ≥ 1)<br><strong>False discovery rate (FDR)</strong> - The rate at which claims of significance are false E[V&#x2F;R]</p>
<h3 id="Correction"><a href="#Correction" class="headerlink" title="Correction"></a>Correction</h3><p><strong>Controlling FWER</strong> - Bonferroni correction</p>
<p>假定做 m 次测试, 要把 FWER 控制在 α, 也就是 Pr(V ≥ 1) &lt; α.<br>然后把新的 α 设置为 α &#x2F; m, 所有小于这个新的 α 的 P-value 就是 significant 的.<br>这种方法的优点就是容易计算, 缺点就是得出的值会非常保守.</p>
<p><strong>Controlling FDR</strong></p>
<p>假定做 m 次测试, 要把 FDR 控制在 α, 也就是 E[V&#x2F;R].<br>把 P-value 从小到大排好序 P(1), …, P(m), 任何 P(i) ≤ α * i&#x2F;m 都是 significant 的.<br>这种方法的优点就是相对容易计算, 没那么保守, 缺点就是 false positive 可能性增加, 而且关联数据可能表现诡异.</p>
<p><strong>Adjusted P-values</strong></p>
<p>注意, 修正过的就已经不能算是 P-values 了.<br>假定我们有 P(1), …, P(m), 我们可以把每一个 P-values * m, 最大值为 1. 如果得出来的值小于 α, 那就是在 Control FWER 上是 significant 的.</p>
<h2 id="Resampled-inference"><a href="#Resampled-inference" class="headerlink" title="Resampled inference"></a>Resampled inference</h2><p>不断的从已有数据集中取数据出来创造新的数据集.  R 里面有两个很有用的工具:</p>
<h3 id="jackknife"><a href="#jackknife" class="headerlink" title="jackknife"></a>jackknife</h3><p>原理是从一组数据中每次删除一个值, 然后用剩下的 (n - 1) 个数据来计算推测要推导的结论.  所以也就是说会有 n 种数据组合和 n 次推导值.  这种做法通常会用在推算偏差和标准误上面.  像中值 (mean) 这种 unbiased 的数据是不用 jackknife 来做的.</p>
<p>计算过程是这样的:</p>
<ul>
<li>X₁, …, Xₙ 是一组测量数据值</li>
<li>假定 θ 是用以上数据全集推导出来的值 (比如 median)</li>
<li>θᵢ 是把 Xᵢ 删除后推导出来的值</li>
<li>假定 θbar &#x3D; 1&#x2F;n * ∑ⁿθᵢ</li>
</ul>
<p>jackknife 算出来的偏差就是 <code>(n - 1) * (θbar - θ)</code>, 标准误就是 <code>[(n - 1)/n * ∑ⁿ(θᵢ - θbar)²] ^ 0.5</code></p>
<h3 id="bootstrap"><a href="#bootstrap" class="headerlink" title="bootstrap"></a>bootstrap</h3><p>bootstrap 是 non-parametric 的.  通常用于 confidence internal 和标准误上面.  bootstrap 原则是指 using the distribution defined by the data to approximate its sampling distribution.</p>
<p>实际操作上来说, bootstrap 原则都是通过模拟来的执行的.  一般都是不断的从观测的数据中取样计算分布状况, 来模拟完整的数据集的分布.<br>从多次的模拟计算中得到的统计概率去计算 confidence interval 或者标准误.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">library<span class="punctuation">(</span>UsingR<span class="punctuation">)</span></span><br><span class="line">library<span class="punctuation">(</span>bootstrap<span class="punctuation">)</span></span><br><span class="line">data<span class="punctuation">(</span>father.son<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">x <span class="operator">&lt;-</span> father.son<span class="operator">$</span>sheight</span><br><span class="line">n <span class="operator">&lt;-</span> <span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">B <span class="operator">&lt;-</span> 1000</span><br><span class="line"></span><br><span class="line">resamples <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span>sample<span class="punctuation">(</span>x<span class="punctuation">,</span> n <span class="operator">*</span> B<span class="punctuation">,</span> replace <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span><span class="punctuation">,</span> B<span class="punctuation">,</span> n<span class="punctuation">)</span></span><br><span class="line">medians <span class="operator">&lt;-</span> apply<span class="punctuation">(</span>resamples<span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> median<span class="punctuation">)</span></span><br><span class="line">sd<span class="punctuation">(</span>medians<span class="punctuation">)</span></span><br><span class="line"><span class="comment">## [1] 0.08452927</span></span><br><span class="line"></span><br><span class="line">quantile<span class="punctuation">(</span>medians<span class="punctuation">,</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0.025</span><span class="punctuation">,</span> <span class="number">0.975</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">##     2.5%    97.5%</span></span><br><span class="line"><span class="comment">## 68.44474 68.81588</span></span><br></pre></td></tr></table></figure>


  
	</div>
		<footer class="article-footer clearfix">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Sword/">Sword</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Statistics/">Statistics</a>
  </div>


<div class="article-share" id="share">

  <div data-url="http://www.thinkingincrowd.me/2014/09/25/statistical-inference-summary/" data-title="Statistical Inference 课后小结 | Thinking in Crowd / 鹄思乱想" data-tsina="kenspirit" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/01/04/2014-retrospect-and-2015-goal-setting/" title="2014 Retrospect and 2015 Goal Setting">
  <strong>PREVIOUS:</strong><br/>
  <span>
  2014 Retrospect and 2015 Goal Setting</span>
</a>
</div>


<div class="next">
<a href="/2014/07/31/half-year-summary/"  title="2014 半年小结">
 <strong>NEXT:</strong><br/> 
 <span>2014 半年小结
</span>
</a>
</div>

</nav>

	<section class="comment">
	
  
    <div id="disqus_thread"></div>
  
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E7%8E%87"><span class="toc-number">1.</span> <span class="toc-text">概率</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87-Conditional-Probability"><span class="toc-number">1.1.</span> <span class="toc-text">条件概率 (Conditional Probability)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bayes%E2%80%99-rule"><span class="toc-number">1.2.</span> <span class="toc-text">Bayes’ rule</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%8A%E6%96%AD%E6%B5%8B%E8%AF%95-Diagnostic-test"><span class="toc-number">1.3.</span> <span class="toc-text">诊断测试 (Diagnostic test)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%9F%E6%9C%9B%E5%80%BC-Expected-Value"><span class="toc-number">2.</span> <span class="toc-text">期望值 (Expected Value)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mean"><span class="toc-number">2.1.</span> <span class="toc-text">Mean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E5%B7%AE-Variance"><span class="toc-number">2.2.</span> <span class="toc-text">方差 (Variance)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">常见的概率分布模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%AF%E5%8A%AA%E5%88%A9%E5%88%86%E5%B8%83-Bernoulli-distribution"><span class="toc-number">3.1.</span> <span class="toc-text">伯努利分布 (Bernoulli distribution)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83-Normal-distribution"><span class="toc-number">3.2.</span> <span class="toc-text">正态分布 (Normal distribution)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Poisson-distribution"><span class="toc-number">3.3.</span> <span class="toc-text">(Poisson distribution)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%90%E8%BF%91-Asymptotics"><span class="toc-number">4.</span> <span class="toc-text">渐近 (Asymptotics)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E6%95%B0%E5%AE%9A%E5%BE%8B-Law-of-Large-Number"><span class="toc-number">4.1.</span> <span class="toc-text">大数定律 (Law of Large Number)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E5%BF%83%E6%9E%81%E9%99%90%E5%AE%9A%E7%90%86-Central-Limit-Theorem"><span class="toc-number">4.2.</span> <span class="toc-text">中心极限定理 (Central Limit Theorem)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Confidence-Intervals"><span class="toc-number">4.3.</span> <span class="toc-text">Confidence Intervals</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#T-Confidence-Intervals"><span class="toc-number">4.4.</span> <span class="toc-text">T Confidence Intervals</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hypothesis-testing"><span class="toc-number">5.</span> <span class="toc-text">Hypothesis testing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">5.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.2.</span> <span class="toc-text">错误类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Upper-Lower-and-Two-Failed-Test"><span class="toc-number">5.3.</span> <span class="toc-text">Upper, Lower, and Two Failed Test</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%92%8C-Confidence-Interval-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">5.4.</span> <span class="toc-text">和 Confidence Interval 的关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P-values"><span class="toc-number">6.</span> <span class="toc-text">P-values</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Power"><span class="toc-number">7.</span> <span class="toc-text">Power</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Multiple-testing"><span class="toc-number">8.</span> <span class="toc-text">Multiple testing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Types-of-Error"><span class="toc-number">8.1.</span> <span class="toc-text">Types of Error</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Error-Rates"><span class="toc-number">8.2.</span> <span class="toc-text">Error Rates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Correction"><span class="toc-number">8.3.</span> <span class="toc-text">Correction</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Resampled-inference"><span class="toc-number">9.</span> <span class="toc-text">Resampled inference</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#jackknife"><span class="toc-number">9.1.</span> <span class="toc-text">jackknife</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bootstrap"><span class="toc-number">9.2.</span> <span class="toc-text">bootstrap</span></a></li></ol></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
			<li><a href="/categories/Life/" title="Life">Life<sup>7</sup></a></li>
		
			<li><a href="/categories/Psychology/" title="Psychology">Psychology<sup>21</sup></a></li>
		
			<li><a href="/categories/Sword/" title="Sword">Sword<sup>66</sup></a></li>
		
			<li><a href="/categories/Think/" title="Think">Think<sup>80</sup></a></li>
		
		</ul>
</div>


  
  <div class="tagcloudlist">
    <p class="asidetitle">Tag Cloud</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/API/" style="font-size: 10px;">API</a> <a href="/tags/AWS/" style="font-size: 10.71px;">AWS</a> <a href="/tags/Ajax/" style="font-size: 10.71px;">Ajax</a> <a href="/tags/AngularJS/" style="font-size: 12.86px;">AngularJS</a> <a href="/tags/Architecture/" style="font-size: 10.71px;">Architecture</a> <a href="/tags/Asynchronous/" style="font-size: 10.71px;">Asynchronous</a> <a href="/tags/Attention/" style="font-size: 10px;">Attention</a> <a href="/tags/BTC/" style="font-size: 10px;">BTC</a> <a href="/tags/Babel/" style="font-size: 10px;">Babel</a> <a href="/tags/Belief/" style="font-size: 10.71px;">Belief</a> <a href="/tags/Bitcoin/" style="font-size: 10.71px;">Bitcoin</a> <a href="/tags/Blockchain/" style="font-size: 16.43px;">Blockchain</a> <a href="/tags/Blogging/" style="font-size: 10px;">Blogging</a> <a href="/tags/Book/" style="font-size: 12.86px;">Book</a> <a href="/tags/Bundling/" style="font-size: 10.71px;">Bundling</a> <a href="/tags/Business-Logic/" style="font-size: 11.43px;">Business Logic</a> <a href="/tags/Cache/" style="font-size: 10.71px;">Cache</a> <a href="/tags/Change/" style="font-size: 13.57px;">Change</a> <a href="/tags/Choice/" style="font-size: 10.71px;">Choice</a> <a href="/tags/Coach/" style="font-size: 10px;">Coach</a> <a href="/tags/Communication/" style="font-size: 12.86px;">Communication</a> <a href="/tags/Conflict/" style="font-size: 10px;">Conflict</a> <a href="/tags/Courage/" style="font-size: 10px;">Courage</a> <a href="/tags/DDD/" style="font-size: 10px;">DDD</a> <a href="/tags/Dapp/" style="font-size: 13.57px;">Dapp</a> <a href="/tags/Data-Modeling/" style="font-size: 10.71px;">Data Modeling</a> <a href="/tags/Database/" style="font-size: 10.71px;">Database</a> <a href="/tags/Death/" style="font-size: 10px;">Death</a> <a href="/tags/Delegation/" style="font-size: 10.71px;">Delegation</a> <a href="/tags/Design/" style="font-size: 11.43px;">Design</a> <a href="/tags/Destiny/" style="font-size: 11.43px;">Destiny</a> <a href="/tags/Distributed/" style="font-size: 12.14px;">Distributed</a> <a href="/tags/EOS/" style="font-size: 10px;">EOS</a> <a href="/tags/Education/" style="font-size: 10.71px;">Education</a> <a href="/tags/Elixir/" style="font-size: 17.14px;">Elixir</a> <a href="/tags/Emotion/" style="font-size: 10.71px;">Emotion</a> <a href="/tags/Empathy/" style="font-size: 11.43px;">Empathy</a> <a href="/tags/Ethereum/" style="font-size: 13.57px;">Ethereum</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/Experience/" style="font-size: 10.71px;">Experience</a> <a href="/tags/ExtJS/" style="font-size: 15px;">ExtJS</a> <a href="/tags/Father/" style="font-size: 10px;">Father</a> <a href="/tags/First-Principle/" style="font-size: 10.71px;">First Principle</a> <a href="/tags/Full-Stack/" style="font-size: 10px;">Full-Stack</a> <a href="/tags/Functional-Programming/" style="font-size: 14.29px;">Functional Programming</a> <a href="/tags/Goal/" style="font-size: 13.57px;">Goal</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Habit/" style="font-size: 10.71px;">Habit</a> <a href="/tags/Health/" style="font-size: 10.71px;">Health</a> <a href="/tags/Idempotency/" style="font-size: 10.71px;">Idempotency</a> <a href="/tags/Influence/" style="font-size: 10px;">Influence</a> <a href="/tags/Integration/" style="font-size: 10px;">Integration</a> <a href="/tags/JSConf/" style="font-size: 10.71px;">JSConf</a> <a href="/tags/JSON/" style="font-size: 10.71px;">JSON</a> <a href="/tags/Jasmine/" style="font-size: 14.29px;">Jasmine</a> <a href="/tags/Javascript/" style="font-size: 20px;">Javascript</a> <a href="/tags/Kanban/" style="font-size: 14.29px;">Kanban</a> <a href="/tags/Leadership/" style="font-size: 11.43px;">Leadership</a> <a href="/tags/Learning/" style="font-size: 10.71px;">Learning</a> <a href="/tags/Love/" style="font-size: 10.71px;">Love</a> <a href="/tags/MVC/" style="font-size: 15px;">MVC</a> <a href="/tags/Management/" style="font-size: 14.29px;">Management</a> <a href="/tags/Mature/" style="font-size: 10px;">Mature</a> <a href="/tags/Maven/" style="font-size: 10.71px;">Maven</a> <a href="/tags/MicroServices/" style="font-size: 10px;">MicroServices</a> <a href="/tags/Milestone/" style="font-size: 10px;">Milestone</a> <a href="/tags/Mnesia/" style="font-size: 11.43px;">Mnesia</a> <a href="/tags/Mocha/" style="font-size: 10px;">Mocha</a> <a href="/tags/Mock/" style="font-size: 11.43px;">Mock</a> <a href="/tags/Modularization/" style="font-size: 10.71px;">Modularization</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/Mood/" style="font-size: 12.14px;">Mood</a> <a href="/tags/Network/" style="font-size: 10px;">Network</a> <a href="/tags/Node-js/" style="font-size: 17.86px;">Node.js</a> <a href="/tags/OTP/" style="font-size: 10.71px;">OTP</a> <a href="/tags/Opportunity/" style="font-size: 10px;">Opportunity</a> <a href="/tags/POI/" style="font-size: 10px;">POI</a> <a href="/tags/Performance/" style="font-size: 10px;">Performance</a> <a href="/tags/Politics/" style="font-size: 10.71px;">Politics</a> <a href="/tags/Problem-Solving/" style="font-size: 11.43px;">Problem Solving</a> <a href="/tags/Productivity/" style="font-size: 11.43px;">Productivity</a> <a href="/tags/Programming/" style="font-size: 15.71px;">Programming</a> <a href="/tags/Promise/" style="font-size: 11.43px;">Promise</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Relationship/" style="font-size: 18.57px;">Relationship</a> <a href="/tags/Responsibility/" style="font-size: 11.43px;">Responsibility</a> <a href="/tags/Retrospect/" style="font-size: 19.29px;">Retrospect</a> <a href="/tags/Risk/" style="font-size: 10px;">Risk</a> <a href="/tags/Rule/" style="font-size: 10px;">Rule</a> <a href="/tags/SPA/" style="font-size: 10px;">SPA</a> <a href="/tags/Scrum/" style="font-size: 10px;">Scrum</a> <a href="/tags/Security/" style="font-size: 10px;">Security</a> <a href="/tags/Server/" style="font-size: 10.71px;">Server</a> <a href="/tags/Sharing/" style="font-size: 10px;">Sharing</a> <a href="/tags/Smart-Contract/" style="font-size: 13.57px;">Smart Contract</a> <a href="/tags/Source-Reading/" style="font-size: 12.86px;">Source Reading</a> <a href="/tags/Startup/" style="font-size: 12.14px;">Startup</a> <a href="/tags/Statistics/" style="font-size: 10px;">Statistics</a> <a href="/tags/Supervisor/" style="font-size: 10.71px;">Supervisor</a> <a href="/tags/Support/" style="font-size: 10px;">Support</a> <a href="/tags/Time-Management/" style="font-size: 10.71px;">Time Management</a> <a href="/tags/Trip/" style="font-size: 11.43px;">Trip</a> <a href="/tags/Tutorial/" style="font-size: 15px;">Tutorial</a> <a href="/tags/TypeScript/" style="font-size: 10.71px;">TypeScript</a> <a href="/tags/UED/" style="font-size: 10px;">UED</a> <a href="/tags/UI/" style="font-size: 10px;">UI</a> <a href="/tags/Unit-Test/" style="font-size: 15px;">Unit Test</a> <a href="/tags/Visualization/" style="font-size: 10px;">Visualization</a> <a href="/tags/Wechat/" style="font-size: 15px;">Wechat</a>
    </div>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> On the road to be a good father, husband, son and web developer, specialized in JS <br/>
			Playing around with Node.js, AngularJS.  Powering thinking through visualization.</p>
	</section>
	 
	<div class="social-font clearfix">
		
		<a href="http://weibo.com/kenspirit" target="_blank" title="weibo"></a>
		
		
		<a href="https://twitter.com/kenspirit" target="_blank" title="twitter"></a>
		
		
		<a href="https://github.com/kenspirit" target="_blank" title="github"></a>
		
		
		<a href="https://www.facebook.com/kenspirit" target="_blank" title="facebook"></a>
		
		
        <a href="https://www.linkedin.com/thinkingincrowd" target="_blank" title="linkedin"></a>
    
    
		  <script src='https://unpkg.com/mermaid@8.9.2/dist/mermaid.min.js'></script>
		  <script>
		    if (window.mermaid) {
		      mermaid.initialize({{ JSON.stringify(config.mermaid.options) }});
		    }
		  </script>
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2022 
		
		<a href="http://www.thinkingincrowd.me" target="_blank" title="鹄思乱想">鹄思乱想</a>
		
		</p>
</div>
</footer>
    
<script>
  var disqus_shortname = 'thinkingincrowd';
  
  var disqus_url = 'http://www.thinkingincrowd.me/2014/09/25/statistical-inference-summary/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>





<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-37378953-1', 'www.thinkingincrowd.me');  
ga('send', 'pageview');
</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?796436d5d2646bb3157d9ac5bd7e7025";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


  </body>
</html>

